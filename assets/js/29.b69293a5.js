(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{398:function(e,t,v){"use strict";v.r(t);var _=v(25),a=Object(_.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"api-server"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#api-server"}},[e._v("#")]),e._v(" API Server")]),e._v(" "),v("p",[e._v("Configuration is structured to following sections:")]),e._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"#application"}},[e._v("Application")])]),e._v(" "),v("li",[v("a",{attrs:{href:"#access-control-list-acl"}},[e._v("Access Control List (ACL)")])]),e._v(" "),v("li",[v("a",{attrs:{href:"#database"}},[e._v("Database")])]),e._v(" "),v("li",[v("a",{attrs:{href:"#filesystem"}},[e._v("Filesystem")])]),e._v(" "),v("li",[v("a",{attrs:{href:"#mail"}},[e._v("Mail")])]),e._v(" "),v("li",[v("a",{attrs:{href:"#queue"}},[e._v("Queue")])]),e._v(" "),v("li",[v("a",{attrs:{href:"#security"}},[e._v("Security")])])]),e._v(" "),v("h2",{attrs:{id:"application"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#application"}},[e._v("#")]),e._v(" Application")]),e._v(" "),v("p",[e._v("Path: "),v("code",[e._v("src/config/app.ts")])]),e._v(" "),v("h3",{attrs:{id:"node-environment"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#node-environment"}},[e._v("#")]),e._v(" Node environment")]),e._v(" "),v("p",[e._v("Node environment to start the application in.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("env")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("NODE_ENV")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("'development' | 'test' | 'production'")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'development'")])])]),e._v(" "),v("h3",{attrs:{id:"name"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[e._v("#")]),e._v(" Name")]),e._v(" "),v("p",[e._v("Application name.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("env")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("APP_NAME")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'Intake24'")])])]),e._v(" "),v("h3",{attrs:{id:"host"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#host"}},[e._v("#")]),e._v(" Host")]),e._v(" "),v("p",[e._v("Internal hostname application listens on.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("host")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("APP_HOST")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'localhost'")])])]),e._v(" "),v("h3",{attrs:{id:"port"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#port"}},[e._v("#")]),e._v(" Port")]),e._v(" "),v("p",[e._v("Internal port application listens on.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("port")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("APP_PORT")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("number")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("3100")])])]),e._v(" "),v("h3",{attrs:{id:"sites-urls"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#sites-urls"}},[e._v("#")]),e._v(" Sites URLs")]),e._v(" "),v("p",[e._v("List of sites URLs. These can either be relative or absolute URLs.")]),e._v(" "),v("ul",[v("li",[e._v("absolute URL -> site is hosted on different domain")]),e._v(" "),v("li",[e._v("relative URL -> site is hosted on same domain. URL gets registered as route.")])]),e._v(" "),v("h4",{attrs:{id:"admin-url"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#admin-url"}},[e._v("#")]),e._v(" Admin URL")]),e._v(" "),v("p",[e._v("URL of admin site.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("url.admin")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("APP_URL_ADMIN")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'/admin'")])])]),e._v(" "),v("h4",{attrs:{id:"documentation-url"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#documentation-url"}},[e._v("#")]),e._v(" Documentation URL")]),e._v(" "),v("p",[e._v("URL of documentation site.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("url.docs")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("APP_URL_DOCS")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'/docs'")])])]),e._v(" "),v("h4",{attrs:{id:"survey-url"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#survey-url"}},[e._v("#")]),e._v(" Survey URL")]),e._v(" "),v("p",[e._v("URL of survey site.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("url.survey")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("APP_URL_SURVEY")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'/survey'")])])]),e._v(" "),v("h4",{attrs:{id:"images-url"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#images-url"}},[e._v("#")]),e._v(" Images URL")]),e._v(" "),v("p",[e._v("URL of images.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("url.images")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("APP_URL_IMAGES")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'localhost:3100/images'")])])]),e._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),v("p",[e._v("Default setup allows local images serving - ideal for development purposes. For production, use reverse proxy, CDN etc.")])]),e._v(" "),v("h2",{attrs:{id:"access-control-list-acl"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#access-control-list-acl"}},[e._v("#")]),e._v(" Access control list (ACL)")]),e._v(" "),v("p",[e._v("Access control list ("),v("code",[e._v("ACL")]),e._v(") implementation is based on three models:")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("user")])]),e._v(" "),v("li",[v("code",[e._v("role")])]),e._v(" "),v("li",[v("code",[e._v("permission")])])]),e._v(" "),v("p",[e._v("Relations between the models are defined as follows:")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("many-to-many")]),e._v(" between "),v("code",[e._v("user")]),e._v(" and "),v("code",[e._v("role")])]),e._v(" "),v("li",[v("code",[e._v("many-to-many")]),e._v(" between "),v("code",[e._v("user")]),e._v(" and "),v("code",[e._v("permission")])]),e._v(" "),v("li",[v("code",[e._v("many-to-many")]),e._v(" between "),v("code",[e._v("role")]),e._v(" and "),v("code",[e._v("permission")])])]),e._v(" "),v("p",[e._v("This allows to grant permissions to users in two ways:")]),e._v(" "),v("ul",[v("li",[e._v("directly associate "),v("code",[e._v("permission")]),e._v(" with "),v("code",[e._v("user")])]),e._v(" "),v("li",[e._v("associate "),v("code",[e._v("permission")]),e._v(" with "),v("code",[e._v("user")]),e._v(" through "),v("code",[e._v("role")]),e._v(" (acting as grouping record for a set of permissions)")])]),e._v(" "),v("p",[e._v("Path: "),v("code",[e._v("src/config/acl.ts")])]),e._v(" "),v("h3",{attrs:{id:"roles"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#roles"}},[e._v("#")]),e._v(" Roles")]),e._v(" "),v("p",[e._v("List of special-purpose roles.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("roles")])])]),e._v(" "),v("h4",{attrs:{id:"superuser"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#superuser"}},[e._v("#")]),e._v(" Superuser")]),e._v(" "),v("p",[e._v("Any newly created permission will be associated with this role.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("roles.superuser")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'superuser'")])])]),e._v(" "),v("h3",{attrs:{id:"permissions"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#permissions"}},[e._v("#")]),e._v(" Permissions")]),e._v(" "),v("p",[e._v("List of special-purpose permissions.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("permissions")])])]),e._v(" "),v("h4",{attrs:{id:"global-support"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#global-support"}},[e._v("#")]),e._v(" Global support")]),e._v(" "),v("p",[e._v("Name of the permission, which defines top-level system support.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("permissions.globalsupport")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'globalsupport'")])])]),e._v(" "),v("h4",{attrs:{id:"survey-admin"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#survey-admin"}},[e._v("#")]),e._v(" Survey admin")]),e._v(" "),v("p",[e._v("Name of the permission, which allows to work with any "),v("code",[e._v("survey")]),e._v(" record.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("permissions.surveyadmin")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'surveyadmin'")])])]),e._v(" "),v("h4",{attrs:{id:"foods-admin"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#foods-admin"}},[e._v("#")]),e._v(" Foods admin")]),e._v(" "),v("p",[e._v("Name of the permission, which allows to work with any "),v("code",[e._v("food")]),e._v(" record.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("permissions.foodsadmin")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'foodsadmin'")])])]),e._v(" "),v("h2",{attrs:{id:"database"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#database"}},[e._v("#")]),e._v(" Database")]),e._v(" "),v("p",[e._v("System consists of two databases:")]),e._v(" "),v("ul",[v("li",[e._v("Foods - stores food-related information, mostly static content")]),e._v(" "),v("li",[e._v("System - stores users/surveys related information, system configuration etc")])]),e._v(" "),v("p",[e._v("Connection info is defined per-environment ("),v("code",[e._v("development")]),e._v(", "),v("code",[e._v("test")]),e._v(", "),v("code",[e._v("production")]),e._v(") and per-database ("),v("code",[e._v("foods")]),e._v(" and "),v("code",[e._v("system")]),e._v(").")]),e._v(" "),v("p",[e._v("Path: "),v("code",[e._v("src/config/database.ts")])]),e._v(" "),v("h3",{attrs:{id:"host-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#host-2"}},[e._v("#")]),e._v(" Host")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("[environment][database].host")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DB_FOODS_HOST")]),e._v(" and "),v("code",[e._v("DB_SYSTEM_HOST")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'localhost'")])])]),e._v(" "),v("h3",{attrs:{id:"port-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#port-2"}},[e._v("#")]),e._v(" Port")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("[environment][database].port")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DB_FOODS_PORT")]),e._v(" and "),v("code",[e._v("DB_SYSTEM_PORT")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("number")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("5432")])])]),e._v(" "),v("h3",{attrs:{id:"database-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#database-2"}},[e._v("#")]),e._v(" Database")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("[environment][database].database")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DB_FOODS_DATABASE")]),e._v(" and "),v("code",[e._v("DB_SYSTEM_DATABASE")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'intake24_foods'")]),e._v(" and "),v("code",[e._v("'intake24_system'")])])]),e._v(" "),v("h3",{attrs:{id:"username"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#username"}},[e._v("#")]),e._v(" Username")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("[environment][database].username")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DB_FOODS_USERNAME")]),e._v(" and "),v("code",[e._v("DB_SYSTEM_USERNAME")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'intake24'")])])]),e._v(" "),v("h3",{attrs:{id:"password"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#password"}},[e._v("#")]),e._v(" Password")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("[environment][database].password")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DB_FOODS_PASSWORD")]),e._v(" and "),v("code",[e._v("DB_SYSTEM_PASSWORD")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("''")])])]),e._v(" "),v("h3",{attrs:{id:"dialect"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#dialect"}},[e._v("#")]),e._v(" Dialect")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("[environment][database].dialect")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DB_FOODS_DRIVER")]),e._v(" and "),v("code",[e._v("DB_SYSTEM_DRIVER")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("'mysql' | 'postgres' | 'sqlite' | 'mariadb' | 'mssql'")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'postgres'")])])]),e._v(" "),v("h2",{attrs:{id:"filesystem"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#filesystem"}},[e._v("#")]),e._v(" Filesystem")]),e._v(" "),v("p",[e._v("Path: "),v("code",[e._v("src/config/filesystem.ts")])]),e._v(" "),v("h3",{attrs:{id:"logs-dir"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#logs-dir"}},[e._v("#")]),e._v(" Logs dir")]),e._v(" "),v("p",[e._v("Logs directory where all application logs are stored.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("local.logs")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("FS_LOGS")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'storage/logs'")])])]),e._v(" "),v("h3",{attrs:{id:"public-dir"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#public-dir"}},[e._v("#")]),e._v(" Public dir")]),e._v(" "),v("p",[e._v("Public directory for serving static files.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("local.public")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("FS_PUBLIC")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'public'")])])]),e._v(" "),v("h3",{attrs:{id:"upload-dir"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#upload-dir"}},[e._v("#")]),e._v(" Upload dir")]),e._v(" "),v("p",[e._v("Upload directory for storing temporarily uploaded files.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("local.upload")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("FS_UPLOAD")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'storage/upload'")])])]),e._v(" "),v("h3",{attrs:{id:"download-dir"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#download-dir"}},[e._v("#")]),e._v(" Download dir")]),e._v(" "),v("p",[e._v("Download directory for storing temporarily downloaded files.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("local.download")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("FS_DOWNLOAD")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'storage/download'")])])]),e._v(" "),v("h3",{attrs:{id:"images-dir"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#images-dir"}},[e._v("#")]),e._v(" Images dir")]),e._v(" "),v("p",[e._v("Images directory for locally hosted images.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("local.images")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("FS_IMAGES")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'storage/images'")])])]),e._v(" "),v("h2",{attrs:{id:"mail"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#mail"}},[e._v("#")]),e._v(" Mail")]),e._v(" "),v("p",[e._v("Mail implementation supports following transports:")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("SMTP")]),e._v(" - SMTP protocol")]),e._v(" "),v("li",[v("code",[e._v("Log")]),e._v(" - logs messages to "),v("code",[e._v("stdout")]),e._v(" (for debugging purposes)")])]),e._v(" "),v("p",[e._v("Implementation is using "),v("a",{attrs:{href:"https://nodemailer.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("nodemailer"),v("OutboundLink")],1),e._v(".")]),e._v(" "),v("p",[e._v("Path: "),v("code",[e._v("src/config/mail.ts")])]),e._v(" "),v("h3",{attrs:{id:"mailer"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#mailer"}},[e._v("#")]),e._v(" Mailer")]),e._v(" "),v("p",[e._v("Selected mailer transport")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mailer")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MAIL_MAILER")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("'smtp' | 'log'")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'log'")])])]),e._v(" "),v("h3",{attrs:{id:"smtp-transport"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#smtp-transport"}},[e._v("#")]),e._v(" SMTP transport")]),e._v(" "),v("h4",{attrs:{id:"host-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#host-3"}},[e._v("#")]),e._v(" Host")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mailers.smtp.host")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MAIL_HOST")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'localhost'")])])]),e._v(" "),v("h4",{attrs:{id:"port-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#port-3"}},[e._v("#")]),e._v(" Port")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mailers.smtp.port")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MAIL_PORT")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("number")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("25")])])]),e._v(" "),v("h4",{attrs:{id:"secure"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#secure"}},[e._v("#")]),e._v(" Secure")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mailers.smtp.secure")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MAIL_SECURE")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("boolean")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("false")])])]),e._v(" "),v("h4",{attrs:{id:"ignoretls"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ignoretls"}},[e._v("#")]),e._v(" ignoreTLS")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mailers.smtp.ignoreTLS")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MAIL_IGNORE_TLS")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("boolean")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("false")])])]),e._v(" "),v("h4",{attrs:{id:"authentication"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[e._v("#")]),e._v(" Authentication")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("object-path: "),v("code",[e._v("mailers.smtp.auth.username")])])]),e._v(" "),v("li",[v("p",[e._v("dotenv var: "),v("code",[e._v("MAIL_USERNAME")])])]),e._v(" "),v("li",[v("p",[e._v("type: "),v("code",[e._v("string | null")])])]),e._v(" "),v("li",[v("p",[e._v("default: "),v("code",[e._v("null")])])]),e._v(" "),v("li",[v("p",[e._v("object-path: "),v("code",[e._v("mailers.smtp.auth.pass")])])]),e._v(" "),v("li",[v("p",[e._v("dotenv var: "),v("code",[e._v("MAIL_PASSWORD")])])]),e._v(" "),v("li",[v("p",[e._v("type: "),v("code",[e._v("string | null")])])]),e._v(" "),v("li",[v("p",[e._v("default: "),v("code",[e._v("null")])])])]),e._v(" "),v("h3",{attrs:{id:"from"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#from"}},[e._v("#")]),e._v(" From")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("from")])])]),e._v(" "),v("h4",{attrs:{id:"address"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#address"}},[e._v("#")]),e._v(" Address")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("from.address")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MAIL_FROM_ADDRESS")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'example@domain.com'")])])]),e._v(" "),v("h4",{attrs:{id:"name-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#name-2"}},[e._v("#")]),e._v(" Name")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("from.name")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MAIL_FROM_NAME")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'Intake24'")])])]),e._v(" "),v("h2",{attrs:{id:"queue"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#queue"}},[e._v("#")]),e._v(" Queue")]),e._v(" "),v("p",[e._v("Queueing system is handled by "),v("a",{attrs:{href:"https://redis.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Redis"),v("OutboundLink")],1),e._v(" & "),v("a",{attrs:{href:"https://github.com/taskforcesh/bullmq",target:"_blank",rel:"noopener noreferrer"}},[e._v("bullmq"),v("OutboundLink")],1)]),e._v(" "),v("h3",{attrs:{id:"redis-instance-connection"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#redis-instance-connection"}},[e._v("#")]),e._v(" Redis instance connection")]),e._v(" "),v("h4",{attrs:{id:"host-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#host-4"}},[e._v("#")]),e._v(" Host")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("redis.host")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("QUEUE_REDIS_HOST")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'localhost'")])])]),e._v(" "),v("h4",{attrs:{id:"port-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#port-4"}},[e._v("#")]),e._v(" Port")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("redis.port")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("QUEUE_REDIS_PORT")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("number")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("6379")])])]),e._v(" "),v("h4",{attrs:{id:"workers"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#workers"}},[e._v("#")]),e._v(" Workers")]),e._v(" "),v("p",[e._v("Number of workers to spawn for job queue")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("workers")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("QUEUE_WORKERS")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("number")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("3")])])]),e._v(" "),v("h2",{attrs:{id:"security"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#security"}},[e._v("#")]),e._v(" Security")]),e._v(" "),v("p",[e._v("Path: "),v("code",[e._v("src/config/security.ts")])]),e._v(" "),v("h3",{attrs:{id:"cross-origin-resource-sharing-cors"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cross-origin-resource-sharing-cors"}},[e._v("#")]),e._v(" Cross-origin resource sharing (CORS)")]),e._v(" "),v("h4",{attrs:{id:"cors-origin"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cors-origin"}},[e._v("#")]),e._v(" CORS Origin")]),e._v(" "),v("p",[e._v("Single origin or list of origins to allow cross-origin resource sharing. Define these, when SPA applications ("),v("code",[e._v("admin")]),e._v(" and "),v("code",[e._v("survey")]),e._v(" sites) are deployed to different domain than "),v("code",[e._v("API Server")])]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("cors.origin")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("CORS_ORIGIN")]),e._v(" (for list of origins, use "),v("code",[e._v("comma-delimited")]),e._v(" string)")]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string | string[] | boolean")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("false")])])]),e._v(" "),v("h3",{attrs:{id:"json-web-tokens"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#json-web-tokens"}},[e._v("#")]),e._v(" JSON web tokens")]),e._v(" "),v("p",[e._v("JSON web tokens ("),v("code",[e._v("JWT")]),e._v(") settings")]),e._v(" "),v("h4",{attrs:{id:"issuer"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#issuer"}},[e._v("#")]),e._v(" Issuer")]),e._v(" "),v("p",[e._v("Issuer for signing JWT tokens")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.issuer")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'intake24'")])])]),e._v(" "),v("h4",{attrs:{id:"access-token-secret"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#access-token-secret"}},[e._v("#")]),e._v(" Access token secret")]),e._v(" "),v("p",[e._v("Secret to sign JWT access token")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.access.secret")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("JWT_ACCESS_SECRET")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])])]),e._v(" "),v("h4",{attrs:{id:"access-token-lifetime"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#access-token-lifetime"}},[e._v("#")]),e._v(" Access token lifetime")]),e._v(" "),v("p",[e._v("Lifetime of JWT access token. Define as ms-formatted string, see "),v("a",{attrs:{href:"https://github.com/vercel/ms",target:"_blank",rel:"noopener noreferrer"}},[e._v("ms"),v("OutboundLink")],1),e._v(" for more information.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.access.lifetime")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("JWT_ACCESS_LIFETIME")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'15m'")])])]),e._v(" "),v("h4",{attrs:{id:"refresh-token-secret"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#refresh-token-secret"}},[e._v("#")]),e._v(" Refresh token secret")]),e._v(" "),v("p",[e._v("Secret to sign JWT refresh token")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.refresh.secret")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("JWT_REFRESH_SECRET")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])])]),e._v(" "),v("h4",{attrs:{id:"refresh-token-lifetime"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#refresh-token-lifetime"}},[e._v("#")]),e._v(" Refresh token lifetime")]),e._v(" "),v("p",[e._v("Lifetime of JWT refresh token. Define as ms-formatted string, see "),v("a",{attrs:{href:"https://github.com/vercel/ms",target:"_blank",rel:"noopener noreferrer"}},[e._v("ms"),v("OutboundLink")],1),e._v(" for more information.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.refresh.lifetime")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("JWT_REFRESH_LIFETIME")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'1d'")])])]),e._v(" "),v("h3",{attrs:{id:"jwt-refresh-token-cookie"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#jwt-refresh-token-cookie"}},[e._v("#")]),e._v(" JWT Refresh token cookie")]),e._v(" "),v("p",[e._v("Refresh token is stored in "),v("code",[e._v("http-only")]),e._v(" cookie in client's browser. There are several properties to configure refresh token cookie.")]),e._v(" "),v("h4",{attrs:{id:"cookie-name"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie-name"}},[e._v("#")]),e._v(" Cookie name")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.cookie.name")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("it24_refresh_token")])])]),e._v(" "),v("h4",{attrs:{id:"cookie-maxage"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie-maxage"}},[e._v("#")]),e._v(" Cookie maxAge")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.cookie.name")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("jwt.refresh.lifetime")]),e._v(" value")]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])])]),e._v(" "),v("h4",{attrs:{id:"cookie-httponly"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie-httponly"}},[e._v("#")]),e._v(" Cookie httpOnly")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.cookie.httpOnly")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("boolean")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("true")])])]),e._v(" "),v("h4",{attrs:{id:"cookie-path"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie-path"}},[e._v("#")]),e._v(" Cookie path")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.cookie.path")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("JWT_COOKIE_PATH")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'/api/refresh'")])])]),e._v(" "),v("h4",{attrs:{id:"cookie-samesite"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie-samesite"}},[e._v("#")]),e._v(" Cookie sameSite")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.cookie.sameSite")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("JWT_COOKIE_SAMESITE")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("boolean | 'lax' | 'strict' | 'none'")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'lax'")])])]),e._v(" "),v("h4",{attrs:{id:"cookie-secure"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie-secure"}},[e._v("#")]),e._v(" Cookie secure")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("jwt.cookie.httpOnly")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("JWT_COOKIE_SECURE")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("boolean")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("false")])])]),e._v(" "),v("h2",{attrs:{id:"multi-factor-authentication-mfa"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#multi-factor-authentication-mfa"}},[e._v("#")]),e._v(" Multi-factor authentication (MFA)")]),e._v(" "),v("p",[e._v("System supports multi-factor authentication ("),v("code",[e._v("MFA")]),e._v(") for admin login.")]),e._v(" "),v("p",[e._v("Supported providers:")]),e._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"https://duo.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Duo Security"),v("OutboundLink")],1)])]),e._v(" "),v("p",[e._v("MFA has to be enabled on system-level (configuration) and user-level (database user record).")]),e._v(" "),v("h3",{attrs:{id:"enabled"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#enabled"}},[e._v("#")]),e._v(" Enabled")]),e._v(" "),v("p",[e._v("Determines whether the MFA is system-enabled or not")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mfa.enabled")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MFA_ENABLED")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("boolean")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("false")])])]),e._v(" "),v("h3",{attrs:{id:"provider"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#provider"}},[e._v("#")]),e._v(" Provider")]),e._v(" "),v("p",[e._v("Selected provider for MFA")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mfa.provider")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("MFA_PROVIDER")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("'duo'")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("'duo'")])])]),e._v(" "),v("h3",{attrs:{id:"duo-provider-settings"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#duo-provider-settings"}},[e._v("#")]),e._v(" Duo provider settings")]),e._v(" "),v("p",[e._v("For more information, check out "),v("a",{attrs:{href:"https://duo.com/docs/duoweb",target:"_blank",rel:"noopener noreferrer"}},[e._v("duo's documentation for WebSDK"),v("OutboundLink")],1)]),e._v(" "),v("h4",{attrs:{id:"integration-key"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#integration-key"}},[e._v("#")]),e._v(" Integration key")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mfa.providers.duo.ikey")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DUO_IKEY")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("''")])])]),e._v(" "),v("h4",{attrs:{id:"secret-key"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#secret-key"}},[e._v("#")]),e._v(" Secret key")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mfa.providers.duo.skey")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DUO_SKEY")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("''")])])]),e._v(" "),v("h4",{attrs:{id:"application-secret-key"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#application-secret-key"}},[e._v("#")]),e._v(" Application secret key")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mfa.providers.duo.akey")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DUO_AKEY")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("''")])])]),e._v(" "),v("h4",{attrs:{id:"host-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#host-5"}},[e._v("#")]),e._v(" Host")]),e._v(" "),v("p",[e._v("API hostname (e.g. api-a1b2c3d4e5.duosecurity.com)")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("mfa.providers.duo.host")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("DUO_HOST")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("''")])])]),e._v(" "),v("h2",{attrs:{id:"google-recaptcha"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#google-recaptcha"}},[e._v("#")]),e._v(" Google reCAPTCHA")]),e._v(" "),v("p",[e._v("Password recovery can be protected by "),v("a",{attrs:{href:"https://developers.google.com/recaptcha/intro",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google reCAPTCHA"),v("OutboundLink")],1),e._v(". V2 is currently supported.")]),e._v(" "),v("h3",{attrs:{id:"enabled-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#enabled-2"}},[e._v("#")]),e._v(" Enabled")]),e._v(" "),v("p",[e._v("Determines whether the reCAPTCHA is enabled or not.")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("recaptcha.enabled")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("RECAPTCHA_ENABLED")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("boolean")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("false")])])]),e._v(" "),v("h3",{attrs:{id:"secret-key-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#secret-key-2"}},[e._v("#")]),e._v(" Secret key")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("recaptcha.secret")])]),e._v(" "),v("li",[e._v("dotenv var: "),v("code",[e._v("RECAPTCHA_SECRET")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("string")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("''")])])]),e._v(" "),v("h2",{attrs:{id:"passwords"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#passwords"}},[e._v("#")]),e._v(" Passwords")]),e._v(" "),v("p",[e._v("Settings for password restore functionality.")]),e._v(" "),v("h3",{attrs:{id:"expire"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#expire"}},[e._v("#")]),e._v(" Expire")]),e._v(" "),v("p",[e._v("Password reset link expiration in "),v("strong",[e._v("minutes")]),e._v(".")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("passwords.expire")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("number")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("60")])])]),e._v(" "),v("h3",{attrs:{id:"throttle"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#throttle"}},[e._v("#")]),e._v(" Throttle")]),e._v(" "),v("p",[e._v("Rate limit setting for password request. It allows 1 request per "),v("code",[e._v("throttle")]),e._v(" value. Value is set in "),v("strong",[e._v("seconds")]),e._v(".")]),e._v(" "),v("ul",[v("li",[e._v("object-path: "),v("code",[e._v("passwords.throttle")])]),e._v(" "),v("li",[e._v("type: "),v("code",[e._v("number")])]),e._v(" "),v("li",[e._v("default: "),v("code",[e._v("60")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);