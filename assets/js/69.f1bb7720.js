(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{483:function(t,e,s){"use strict";s.r(e);var a=s(31),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),s("p",[t._v("Both "),s("code",[t._v("admin")]),t._v(" / "),s("code",[t._v("survey")]),t._v(" front-ends and "),s("code",[t._v("api")]),t._v(" backend are set up with "),s("a",{attrs:{href:"https://jestjs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jest"),s("OutboundLink")],1),t._v(" testing framework.")]),t._v(" "),s("h2",{attrs:{id:"api-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-server"}},[t._v("#")]),t._v(" API Server")]),t._v(" "),s("p",[t._v("To run unit and integration tests on your local machine, start by copying your "),s("code",[t._v(".env")]),t._v(" file to "),s("code",[t._v("tests/.env-test")]),t._v(".")]),t._v(" "),s("p",[t._v("Make sure to edit the "),s("code",[t._v(".env-test")]),t._v(" file and change the database settings to point to test databases instead of your\nnormal development ones. The foods and system test databases should be empty databases with the necessary\nextensions (e.g., "),s("code",[t._v("uuid-ossp")]),t._v(") installed.")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[s("strong",[t._v("Do not run any tests")]),t._v(" unless you're sure that the database configuration settings in the "),s("code",[t._v(".env-test")]),t._v(" file are\ncorrect because the test framework setup code will "),s("strong",[t._v("destroy all data")]),t._v(" in those databases!")])]),t._v(" "),s("p",[t._v("If using the development VM, simply copy "),s("code",[t._v("tests/.env-test-dev-vm")]),t._v(" to "),s("code",[t._v("tests/.env-test")]),t._v(" and you're good to go.")]),t._v(" "),s("p",[t._v("Backend testing is set up for "),s("code",[t._v("unit")]),t._v(" and "),s("code",[t._v("integration")]),t._v(" tests. You can run tests with following commands.")]),t._v(" "),s("p",[t._v("Unit tests")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run test:unit\n")])])]),s("p",[t._v("Unit tests watch for development")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run test:unit:watch\n")])])]),s("p",[t._v("Integration tests")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run test:integration\n")])])]),s("p",[t._v("Integration tests watch for development")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run test:integration:watch\n")])])]),s("h2",{attrs:{id:"admin-survey-apps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin-survey-apps"}},[t._v("#")]),t._v(" Admin & Survey apps")]),t._v(" "),s("p",[t._v("Frontends use Vue.js Jest implementation, so you can run tests with:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);