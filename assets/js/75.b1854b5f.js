(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{494:function(e,t,a){"use strict";a.r(t);var s=a(31),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"get-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-started"}},[e._v("#")]),e._v(" Get started")]),e._v(" "),a("p",[e._v("This section briefly describes how to configure, build and start the Intake24 components.")]),e._v(" "),a("h2",{attrs:{id:"repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repository"}},[e._v("#")]),e._v(" Repository")]),e._v(" "),a("p",[e._v("Clone the repository")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/MRC-Epid-it24/intake24\n")])])]),a("p",[e._v("Repository is set as mono-repository with "),a("a",{attrs:{href:"https://docs.npmjs.com/cli/v7/using-npm/workspaces",target:"_blank",rel:"noopener noreferrer"}},[e._v("workspaces"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("Shared components are in "),a("code",[e._v("packages")]),e._v(" folder. Applications are in "),a("code",[e._v("apps")]),e._v(" folder.")]),e._v(" "),a("p",[e._v("Install "),a("code",[e._v("pnpm")]),e._v(" using built-in "),a("code",[e._v("npm")]),e._v(" or see "),a("a",{attrs:{href:"https://pnpm.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("pnpm docs"),a("OutboundLink")],1),e._v(" for further options.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("pnpm")]),e._v("\n")])])]),a("p",[e._v("You can then install all dependencies from root-level running")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("pnpm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Installing deps from top-level using "),a("code",[e._v("npm")]),e._v(" isn't 100% perfect. Few observations:")]),e._v(" "),a("ul",[a("li",[e._v("it works fine for frontend apps")]),e._v(" "),a("li",[a("code",[e._v("apps/api")]),e._v(" can cause some platform-specific issues, where not all dependencies are correctly resolved. If you cannot boot it up due to missing dependencies, run "),a("code",[e._v("npm install")]),e._v(" in "),a("code",[e._v("app/api")]),e._v(" folder.")]),e._v(" "),a("li",[e._v("above applies also for few packages")]),e._v(" "),a("li",[e._v("some IDEs have issues to see all dependencies correctly and can show some false-positive issues of missing dependencies. This might require you to tweak your IDE to work correctly with multi-repository structure.")])])]),e._v(" "),a("p",[e._v("If you are running "),a("code",[e._v("npm install")]),e._v(" separately for each application, do not forget to run it in all "),a("code",[e._v("package/*")]),e._v(" folders")]),e._v(" "),a("p",[e._v("Navigate to "),a("code",[e._v("packages/*")]),e._v(" directory and install project dependencies.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Code is using "),a("code",[e._v(".env")]),e._v(" environment files. Each project contains a template file ("),a("code",[e._v(".env-template")]),e._v("). If you're setting up fresh project, you can run CLI command, which generates all the files and couple of required specific keys. Follow the "),a("a",{attrs:{href:"/overview/cli/global"}},[e._v("CLI instructions")]),e._v(" and how to run "),a("a",{attrs:{href:"/overview/cli/generate-env"}},[e._v("generate-env")]),e._v(".")])]),e._v(" "),a("h2",{attrs:{id:"api-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-server"}},[e._v("#")]),e._v(" API Server")]),e._v(" "),a("p",[e._v("Navigate to "),a("code",[e._v("apps/api")]),e._v(" directory.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" apps/api\n")])])]),a("p",[e._v("Copy template of configuration file and edit it as required. Please see "),a("RouterLink",{attrs:{to:"/config/"}},[e._v("Configuration")]),e._v(" section for detailed description of configuration options.")],1),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" .env-template .env\n")])])]),a("p",[e._v("Build the application")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run prod\n")])])]),a("p",[e._v("Start the application")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run start\n")])])]),a("h3",{attrs:{id:"for-production-consider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-production-consider"}},[e._v("#")]),e._v(" For production, consider:")]),e._v(" "),a("ol",[a("li",[e._v("Deploy as dedicated service. Refer to your OS environment how to set that up.")]),e._v(" "),a("li",[e._v("User process manager, e.g. "),a("a",{attrs:{href:"https://pm2.keymetrics.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("PM2"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Deploy behind proper http server, e.g. "),a("a",{attrs:{href:"https://www.nginx.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nginx"),a("OutboundLink")],1),e._v(", "),a("a",{attrs:{href:"https://www.apache.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache"),a("OutboundLink")],1),e._v(" etc.")])]),e._v(" "),a("p",[e._v("Deployment section / ansible scripts provide examples how to use dedicated service on Ubuntu and run it behind Nginx reverse proxy.")]),e._v(" "),a("h3",{attrs:{id:"database-migrations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#database-migrations"}},[e._v("#")]),e._v(" Database migrations")]),e._v(" "),a("ul",[a("li",[e._v("project is using "),a("a",{attrs:{href:"https://github.com/sequelize/cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("sequelize-cli"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("database layer is located in "),a("code",[e._v("packages/db")])]),e._v(" "),a("li",[e._v("config / migration files (per database) are store in respective "),a("code",[e._v("packages/db/sequelize/{database}")]),e._v(" folders")])]),e._v(" "),a("p",[e._v("Migrations can be executed from root-level or package level with following commands")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("pnpm")]),e._v(" run migrate:foods\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("pnpm")]),e._v(" run migrate:system\n")])])]),a("h2",{attrs:{id:"admin-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#admin-client"}},[e._v("#")]),e._v(" Admin client")]),e._v(" "),a("p",[e._v("Navigate to "),a("code",[e._v("apps/admin")]),e._v(" directory.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" apps/admin\n")])])]),a("p",[e._v("Copy template of configuration file and edit it as required. Please see "),a("RouterLink",{attrs:{to:"/config/"}},[e._v("Configuration")]),e._v(" section for detailed description of configuration options.")],1),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" .env-template .env\n")])])]),a("p",[e._v("Build the application")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run build\n")])])]),a("p",[e._v("Start the application")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run start\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("This should only be used if you host the client on separate domain. It will start separate http server to serve the application.")])]),e._v(" "),a("p",[e._v("Serve the application locally in development mode with hot-reload")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run serve\n")])])]),a("h2",{attrs:{id:"survey-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#survey-client"}},[e._v("#")]),e._v(" Survey client")]),e._v(" "),a("p",[e._v("Navigate to "),a("code",[e._v("apps/survey")]),e._v(" directory.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" apps/survey\n")])])]),a("p",[e._v("Copy template of configuration file and edit it as required. Please see "),a("RouterLink",{attrs:{to:"/config/"}},[e._v("Configuration")]),e._v(" section for detailed description of configuration options.")],1),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" .env-template .env\n")])])]),a("p",[e._v("Build the application")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run build\n")])])]),a("p",[e._v("Start the application")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run start\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("This should only be used if you host the client on separate domain. It will start separate http server to serve the application.")])]),e._v(" "),a("p",[e._v("Serve the application locally in development mode with hot-reload")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run serve\n")])])]),a("h2",{attrs:{id:"documentation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#documentation"}},[e._v("#")]),e._v(" Documentation")]),e._v(" "),a("p",[e._v("Documentation is built with "),a("a",{attrs:{href:"https://vuepress.vuejs.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("vuepress"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Currently "),a("code",[e._v("docs")]),e._v(" is still using "),a("code",[e._v("npm")]),e._v(" to install dependencies as there is an issue with "),a("code",[e._v("pnpm")]),e._v(" and correctly resolving webpack version through "),a("code",[e._v("vue-server-renderer")]),e._v(".")])]),e._v(" "),a("p",[e._v("Navigate to "),a("code",[e._v("apps/docs")]),e._v(" directory.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" apps/survey\n")])])]),a("p",[e._v("Install dependencies using "),a("code",[e._v("npm")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])])]),a("p",[e._v("Copy template of configuration file and edit it as required. Please see "),a("RouterLink",{attrs:{to:"/config/"}},[e._v("Configuration")]),e._v(" section for detailed description of configuration options.")],1),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" .env-template .env\n")])])]),a("p",[e._v("Serve the application locally in development mode with hot-reload")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pnpm run dev\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Documentation is automatically rebuild and deployed to dedicated site whenever source code is updated.")])])])}),[],!1,null,null,null);t.default=n.exports}}]);