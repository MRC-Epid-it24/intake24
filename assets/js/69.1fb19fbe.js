(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{486:function(e,t,s){"use strict";s.r(t);var a=s(31),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"source-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#source-code"}},[e._v("#")]),e._v(" Source code")]),e._v(" "),s("p",[e._v("Install "),s("code",[e._v("git")]),e._v(" if you don't already have it.")]),e._v(" "),s("h2",{attrs:{id:"repository"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#repository"}},[e._v("#")]),e._v(" Repository")]),e._v(" "),s("p",[e._v("Clone the repository")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/MRC-Epid-it24/intake24\n")])])]),s("p",[e._v("Repository is set as mono-repository with "),s("a",{attrs:{href:"https://docs.npmjs.com/cli/v7/using-npm/workspaces",target:"_blank",rel:"noopener noreferrer"}},[e._v("workspaces"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("Applications are in "),s("code",[e._v("apps")]),e._v(" folder. Shared components are in "),s("code",[e._v("packages")]),e._v(" folder.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("├─ apps -> Applications\n│  └─ api -> API Server\n│  └─ admin -> Admin tool\n│  └─ cli -> Command line interface\n│  └─ docs -> Documentation site\n│  └─ survey -> Survey applications\n├─ deployment - Ansible playbooks / scripts for deployment\n└─ packages\n   └─ common (common shared code)\n   └─ db (database layer)\n   └─ i18n (translations)\n   └─ services (shared services for apps)\n   └─ ui (shared UI components for frontend apps)\n")])])]),s("h2",{attrs:{id:"dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),s("p",[e._v("Intake24 components are set up with "),s("code",[e._v("pnpm")]),e._v(" and documentation is set up with "),s("code",[e._v("npm")]),e._v(" (there are some issues to be resolved for migration to "),s("code",[e._v("pnpm")]),e._v(").")]),e._v(" "),s("p",[e._v("Install "),s("code",[e._v("pnpm")]),e._v(" using built-in "),s("code",[e._v("npm")]),e._v(" or see "),s("a",{attrs:{href:"https://pnpm.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("pnpm docs"),s("OutboundLink")],1),e._v(" for further options.")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -g "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("pnpm")]),e._v("\n")])])]),s("p",[e._v("Install all dependencies from root-level")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("pnpm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("Installing deps from top-level using "),s("code",[e._v("npm")]),e._v(" isn't 100% perfect. Few observations:")]),e._v(" "),s("ul",[s("li",[e._v("it works fine for frontend apps")]),e._v(" "),s("li",[s("code",[e._v("apps/api")]),e._v(" can cause some platform-specific issues, where not all dependencies are correctly resolved. If you cannot boot it up due to missing dependencies, run "),s("code",[e._v("npm install")]),e._v(" in "),s("code",[e._v("app/api")]),e._v(" folder.")]),e._v(" "),s("li",[e._v("above applies also for few packages")]),e._v(" "),s("li",[e._v("some IDEs have issues to see all dependencies correctly and can show some false-positive issues of missing dependencies. This might require you to tweak your IDE to work correctly with multi-repository structure.")])])]),e._v(" "),s("p",[e._v("If you are running "),s("code",[e._v("npm install")]),e._v(" separately for each application, do not forget to run it in all "),s("code",[e._v("package/*")]),e._v(" folders")]),e._v(" "),s("h2",{attrs:{id:"code-style"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-style"}},[e._v("#")]),e._v(" Code style")]),e._v(" "),s("p",[e._v("Project is set up with "),s("a",{attrs:{href:"https://eslint.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("eslint"),s("OutboundLink")],1),e._v(" and "),s("a",{attrs:{href:"https://prettier.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("prettier"),s("OutboundLink")],1),e._v(" to help to keep clean and maintainable code.")]),e._v(" "),s("p",[e._v("Both integrate very well with most of the IDEs. You will probably just need to install respective plugins / extensions and configure it to run on "),s("code",[e._v("save")]),e._v(" to have immediate effect.")]),e._v(" "),s("p",[e._v("You can also run it manually from root-level or in each "),s("code",[e._v("app")]),e._v(" / "),s("code",[e._v("package")]),e._v(".")]),e._v(" "),s("p",[e._v("Run linting")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("pnpm run lint\n")])])]),s("p",[e._v("Run linting and try to fix as much as possible automatically")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("pnpm run lint:fix\n")])])]),s("h2",{attrs:{id:"renovate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#renovate"}},[e._v("#")]),e._v(" Renovate")]),e._v(" "),s("p",[e._v("Repository is set up with "),s("a",{attrs:{href:"https://github.com/renovatebot/renovate",target:"_blank",rel:"noopener noreferrer"}},[e._v("renovate bot"),s("OutboundLink")],1),e._v(", which checks the dependecies prepare PRs. It runs on weekly basis and can be configured using "),s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/intake24/blob/master/.github/renovate.json5",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("renovate.json")]),s("OutboundLink")],1),e._v(" config file.")]),e._v(" "),s("h2",{attrs:{id:"continuous-integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#continuous-integration"}},[e._v("#")]),e._v(" Continuous integration")]),e._v(" "),s("h3",{attrs:{id:"build"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build"}},[e._v("#")]),e._v(" Build")]),e._v(" "),s("p",[e._v("Main "),s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/intake24/blob/master/.github/workflows/ci.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Build CI"),s("OutboundLink")],1),e._v(" action is triggered on source code change and it runs build / tests / lint steps for each components to ensure all is working as expected.")]),e._v(" "),s("h3",{attrs:{id:"documentation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#documentation"}},[e._v("#")]),e._v(" Documentation")]),e._v(" "),s("p",[e._v("Whenever "),s("code",[e._v("docs")]),e._v(" source code is modified, "),s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/intake24/blob/master/.github/workflows/docs.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docs CI"),s("OutboundLink")],1),e._v(" is triggered and documentation site is automatically rebuilt.")])])}),[],!1,null,null,null);t.default=n.exports}}]);