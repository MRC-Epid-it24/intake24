(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{411:function(s,t,a){"use strict";a.r(t);var e=a(26),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[s._v("#")]),s._v(" Authentication")]),s._v(" "),a("p",[s._v("Current authentication system is based on JWT tokens.")]),s._v(" "),a("p",[s._v("It is designed to work with SPA applications:")]),s._v(" "),a("ul",[a("li",[s._v("Survey / Feedback frontend")]),s._v(" "),a("li",[s._v("Admin tool")])]),s._v(" "),a("p",[s._v("Login endpoints issue JWT "),a("code",[s._v("access tokens")]),s._v(" in response body. "),a("code",[s._v("Access token")]),s._v(" is short-lived JWT and should be included in header to authorize given request.")]),s._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[s._v("GET /some/end/point\n\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Authorization:")]),s._v(" Bearer {accessToken}\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json\n")])])]),a("p",[s._v("Along the response, "),a("code",[s._v("http-only")]),s._v(" cookie with "),a("code",[s._v("refresh token")]),s._v(" is issued, which can be used to obtain fresh access token.")]),s._v(" "),a("h2",{attrs:{id:"login-with-email"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#login-with-email"}},[s._v("#")]),s._v(" Login with email")]),s._v(" "),a("p",[s._v("Login with email / password")]),s._v(" "),a("h3",{attrs:{id:"request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[s._v("#")]),s._v(" Request")]),s._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[s._v("POST /api/login\n\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),a("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"email"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),a("h3",{attrs:{id:"response"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[s._v("#")]),s._v(" Response")]),s._v(" "),a("p",[s._v("Response can differ based on whether multi-factor authentication is enabled or not.")]),s._v(" "),a("h4",{attrs:{id:"successful-login-without-mfa-challenge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#successful-login-without-mfa-challenge"}},[s._v("#")]),s._v(" Successful login without MFA challenge")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h4",{attrs:{id:"successful-login-with-mfa-challenge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#successful-login-with-mfa-challenge"}},[s._v("#")]),s._v(" Successful login with MFA challenge")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mfa"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"login-with-survey-alias"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#login-with-survey-alias"}},[s._v("#")]),s._v(" Login with survey alias")]),s._v(" "),a("p",[s._v("Login with username / password")]),s._v(" "),a("h3",{attrs:{id:"request-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-2"}},[s._v("#")]),s._v(" Request")]),s._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[s._v("POST /api/login/alias\n\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),a("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"userName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"password"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"surveyId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),a("h3",{attrs:{id:"response-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-2"}},[s._v("#")]),s._v(" Response")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"login-with-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#login-with-token"}},[s._v("#")]),s._v(" Login with token")]),s._v(" "),a("p",[s._v("Login with token")]),s._v(" "),a("h3",{attrs:{id:"request-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-3"}},[s._v("#")]),s._v(" Request")]),s._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[s._v("POST /api/login/token\n\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),a("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"token"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),a("h3",{attrs:{id:"response-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-3"}},[s._v("#")]),s._v(" Response")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"verify-mfa-challenge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#verify-mfa-challenge"}},[s._v("#")]),s._v(" Verify MFA challenge")]),s._v(" "),a("p",[s._v("Verify multi-factor authentication challenge")]),s._v(" "),a("h3",{attrs:{id:"request-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-4"}},[s._v("#")]),s._v(" Request")]),s._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[s._v("POST /api/login/verify\n\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),a("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sigResponse"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),a("h3",{attrs:{id:"response-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-4"}},[s._v("#")]),s._v(" Response")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"refresh-access-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#refresh-access-token"}},[s._v("#")]),s._v(" Refresh access token")]),s._v(" "),a("p",[s._v("Refresh access token using refresh token")]),s._v(" "),a("p",[s._v("API server expects "),a("code",[s._v("refresh token")]),s._v(" sent as cookie. Cookie name can differ based on API server configuration. Default ("),a("code",[s._v("it24_refresh_token")]),s._v(")")]),s._v(" "),a("h3",{attrs:{id:"request-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-5"}},[s._v("#")]),s._v(" Request")]),s._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[s._v("POST /api/refresh\n\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),a("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\nCookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("="),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("refreshToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),a("h3",{attrs:{id:"response-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-5"}},[s._v("#")]),s._v(" Response")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"logout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logout"}},[s._v("#")]),s._v(" Logout")]),s._v(" "),a("p",[s._v("Clears "),a("code",[s._v("http-only")]),s._v(" cookie which stores "),a("code",[s._v("refresh token")]),s._v(" and revokes "),a("code",[s._v("refresh token")]),s._v(".")]),s._v(" "),a("h3",{attrs:{id:"request-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-6"}},[s._v("#")]),s._v(" Request")]),s._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[s._v("POST /api/logout\n\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json\n")])])]),a("h3",{attrs:{id:"response-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-6"}},[s._v("#")]),s._v(" Response")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);