(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{414:function(e,t,s){"use strict";s.r(t);var a=s(26),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"survey"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#survey"}},[e._v("#")]),e._v(" Survey")]),e._v(" "),s("p",[e._v("Survey-specific API functions accessible to respondents.")]),e._v(" "),s("h2",{attrs:{id:"public-survey-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#public-survey-parameters"}},[e._v("#")]),e._v(" Public survey parameters")]),e._v(" "),s("p",[e._v("Publicly accessible API end-point.")]),e._v(" "),s("p",[e._v("Returns survey parameters necessary to render the survey login page such as the language settings and the support\ne-mail.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/SystemDataSQL/src/main/scala/uk/ac/ncl/openlab/intake24/systemsql/user/SurveyServiceImpl.scala#L24-L35",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("GET /api/surveys/{id}/parameters\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID.")]),e._v(" "),s("h3",{attrs:{id:"response"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"localeId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"respondentLanguageId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"supportEmail"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"originatingURL"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string?\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("originatingURL")]),e._v(" is a feature for integrating with external systems. In v3 respondents are redirected to this URL\nin case of authentication failure so the external system can perform the authentication for them. A better solution\nshould be used for v4.")]),e._v(" "),s("h2",{attrs:{id:"survey-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#survey-parameters"}},[e._v("#")]),e._v(" Survey parameters")]),e._v(" "),s("p",[e._v("Returns survey parameters such as the scheme ID, current status, custom HTML content etc.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/SystemDataSQL/src/main/scala/uk/ac/ncl/openlab/intake24/systemsql/user/SurveyServiceImpl.scala#L46-L85",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-2"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("GET /api/surveys/{id}/parameters\n\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Authorization:")]),e._v(" Bearer {accessToken}\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type:")]),e._v(" application/json\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID.")]),e._v(" "),s("h3",{attrs:{id:"response-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-2"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"schemeId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"state"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"pending"')]),e._v(" | "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"running"')]),e._v(" | "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"finished"')]),e._v(" | "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"suspended"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"suspensionReason"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"finalPageHtml"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"uxEventSettings"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"enableSearchEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" \n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"enableAssociatedFoodsEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"storeUserSessionOnServer"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"maximumDailySubmissions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" number\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"survey-follow-up"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#survey-follow-up"}},[e._v("#")]),e._v(" Survey follow-up")]),e._v(" "),s("p",[e._v("Returns actions available at the end of the recall which an be a link to the next (external) stage of the survey\nand/or a link to the dietary feedback.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/system/user/SurveyController.scala#L116-L138",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-3"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("GET /api/surveys/{id}/follow-up\n\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Authorization:")]),e._v(" Bearer {accessToken}\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type:")]),e._v(" application/json\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID.")]),e._v(" "),s("h3",{attrs:{id:"response-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-3"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"followUpUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" \n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"showFeedback"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"user-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-info"}},[e._v("#")]),e._v(" User info")]),e._v(" "),s("p",[e._v("Returns a subset of personal data for the current user that is relevant to the recall application.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/system/user/SurveyController.scala#L86-L114",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-4"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("GET /api/surveys/{id}/user-info?tz={timeZone}\n\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Authorization:")]),e._v(" Bearer {accessToken}\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type:")]),e._v(" application/json\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID,")]),e._v(" "),s("p",[s("strong",[e._v("tz")]),e._v(" is the user's local time zone in tzdata format (e.g. as returned by "),s("code",[e._v("Intl.DateTimeFormat().resolvedOptions().timeZone")]),e._v("\nin web browsers).")]),e._v(" "),s("h3",{attrs:{id:"response-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-4"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"recallNumber"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"redirectToFeedback"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"maximumTotalSubmissionsReached"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"maximumDailySubmissionsReached"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the internal (numerical) Intake24 user ID,")]),e._v(" "),s("p",[s("strong",[e._v("name")]),e._v(" is optional first name of the respondent (used to confirm that the right person is completing the recall),")]),e._v(" "),s("p",[s("strong",[e._v("recallNumber")]),e._v(" is the current recall number, i.e. the number of previous submissions + 1,")]),e._v(" "),s("p",[s("strong",[e._v("redirectToFeedback")]),e._v(" means that the user should be redirected to dietary feedback and not allowed to complete,\nany more recalls")]),e._v(" "),s("p",[s("strong",[e._v("maximumTotalSubmissionsReached")]),e._v(" means that the user is not allowed to complete any more recalls (used to display\nthe correct error page in case the dietary feedback redirect is disabled),")]),e._v(" "),s("p",[s("strong",[e._v("maximumDailySubmissionsReached")]),e._v(" means that the user is not allowed to complete any more recalls "),s("em",[e._v("today")]),e._v(' but they\ncould do so tomorrow. "Today" is defined as the current day in the user\'s local time zone.')]),e._v(" "),s("h2",{attrs:{id:"submit-recall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#submit-recall"}},[e._v("#")]),e._v(" Submit recall")]),e._v(" "),s("p",[e._v("Submit a completed recall.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/system/user/SurveyController.scala#L181-L290",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-5"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("POST /api/surveys/{id}/submissions\n\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Authorization:")]),e._v(" Bearer {accessToken}\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type:")]),e._v(" application/json"),s("span",{pre:!0,attrs:{class:"token application-json"}},[e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" recall "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" \n")])])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID,")]),e._v(" "),s("p",[s("strong",[e._v("recall")]),e._v(" is a completed dietary recall in JSON format.")]),e._v(" "),s("h3",{attrs:{id:"response-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-5"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("p",[e._v("Same as survey follow-up:")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"followUpUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" \n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"showFeedback"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" boolean\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"request-assistance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-assistance"}},[e._v("#")]),e._v(" Request assistance")]),e._v(" "),s("p",[e._v("Notify people having support role for the survey to give the respondent a call to help them complete their recall.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/system/user/HelpController.scala#L68-L138",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-6"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("POST /api/surveys/{id}/request-callback\n\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Authorization:")]),e._v(" Bearer {accessToken}\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type:")]),e._v(" application/json"),s("span",{pre:!0,attrs:{class:"token application-json"}},[e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"phone"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" \n")])])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID,")]),e._v(" "),s("p",[s("strong",[e._v("name")]),e._v(" and "),s("strong",[e._v("phone")]),e._v(" are the respondent's contact details (as entered into the assistance request form by the\nrespondent).")]),e._v(" "),s("h3",{attrs:{id:"response-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-6"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("p",[e._v("The response has no body.")]),e._v(" "),s("h2",{attrs:{id:"generate-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#generate-user"}},[e._v("#")]),e._v(" Generate user")]),e._v(" "),s("p",[e._v("Publicly accessible API end-point.")]),e._v(" "),s("p",[e._v("Automatically create a new user account with a respondent role and random credentials if allowed by the survey settings.\nCurrently used for the demo survey feature.")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("This function presents a serious vulnerability in the current implementation and needs a re-design to at least\ninclude a CAPTCHA challenge and a rate limit.")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/system/user/GeneratedUsersController.scala#L74-L96",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-7"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("POST /api/surveys/{id}/generate-user\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID.")]),e._v(" "),s("h3",{attrs:{id:"response-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-7"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("p",[e._v("The randomly generated credentials:")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"userName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"password"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"create-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-user"}},[e._v("#")]),e._v(" Create user")]),e._v(" "),s("p",[e._v("Publicly accessible API end-point.")]),e._v(" "),s("p",[e._v("Create a new user account with a specific user name and a unique redirect URL if allowed by the survey settings.\nCurrently used for integration with external survey systems.")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("This function presents a vulnerability similar to the generate user function. The JWT signing is done on the\nclient side by the current users of this function and can therefore be easily extracted.")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/system/user/GeneratedUsersController.scala#L126-L153",target:"_blank",rel:"noopener noreferrer"}},[e._v("v3 implementation"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"request-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-8"}},[e._v("#")]),e._v(" Request")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[e._v("POST /api/surveys/{id}/create-user?params={token}\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("id")]),e._v(" is the survey ID,")]),e._v(" "),s("p",[s("strong",[e._v("token")]),e._v(" is the request parameters encoded as a signed JWT token. The signing key is set up in the survey parameters.")]),e._v(" "),s("h3",{attrs:{id:"response-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-8"}},[e._v("#")]),e._v(" Response")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"userId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" \n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"redirect"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" \n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"authToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("where:")]),e._v(" "),s("p",[s("strong",[e._v("userId")]),e._v(" is the internal Intake24 user ID,")]),e._v(" "),s("p",[s("strong",[e._v("redirect")]),e._v(" is the redirect URL decoded from the input token,")]),e._v(" "),s("p",[s("strong",[e._v("authToken")]),e._v(" is the authentication token for the new user.")])])}),[],!1,null,null,null);t.default=r.exports}}]);