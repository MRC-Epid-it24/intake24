import{_ as i,c as a,o as t,ag as o}from"./chunks/framework.CDhRSyRB.js";const m=JSON.parse('{"title":"Rate limiter","description":"","frontmatter":{},"headers":[],"relativePath":"config/api/rate-limiter.md","filePath":"config/api/rate-limiter.md"}'),d={name:"config/api/rate-limiter.md"};function l(r,e,c,n,s,h){return t(),a("div",null,e[0]||(e[0]=[o('<h1 id="rate-limiter" tabindex="-1">Rate limiter <a class="header-anchor" href="#rate-limiter" aria-label="Permalink to &quot;Rate limiter&quot;">​</a></h1><p>Path: <code>apps/api/src/config/rate-limiter.ts</code></p><p><a href="https://redis.io" target="_blank" rel="noreferrer">Redis</a> is used as rate-limiter store driver.</p><p>Redis is also used for other parts of system (cache, queue, session), they have separate connection settings, so they can be configured independently if needed.</p><div class="tip custom-block"><p class="custom-block-title">Rate limiter time window definition</p><p>Time window to track the requests is defined as <code>ms-formatted</code> string, see <a href="https://github.com/vercel/ms" target="_blank" rel="noreferrer">ms</a> for more information.</p></div><h2 id="redis-instance" tabindex="-1">Redis instance <a class="header-anchor" href="#redis-instance" aria-label="Permalink to &quot;Redis instance&quot;">​</a></h2><h3 id="url" tabindex="-1">URL <a class="header-anchor" href="#url" aria-label="Permalink to &quot;URL&quot;">​</a></h3><ul><li>object-path: <code>redis.url</code></li><li>dotenv var: <code>RATE_LIMITER_REDIS_URL | REDIS_URL</code></li><li>type: <code>string</code></li><li>default: <code>undefined</code></li></ul><h3 id="host" tabindex="-1">Host <a class="header-anchor" href="#host" aria-label="Permalink to &quot;Host&quot;">​</a></h3><ul><li>object-path: <code>redis.host</code></li><li>dotenv var: <code>RATE_LIMITER_REDIS_HOST | REDIS_HOST</code></li><li>type: <code>string</code></li><li>default: <code>&#39;localhost&#39;</code></li></ul><h3 id="port" tabindex="-1">Port <a class="header-anchor" href="#port" aria-label="Permalink to &quot;Port&quot;">​</a></h3><ul><li>object-path: <code>redis.port</code></li><li>dotenv var: <code>RATE_LIMITER_REDIS_PORT | REDIS_PORT</code></li><li>type: <code>number</code></li><li>default: <code>6379</code></li></ul><h3 id="database" tabindex="-1">Database <a class="header-anchor" href="#database" aria-label="Permalink to &quot;Database&quot;">​</a></h3><ul><li>object-path: <code>redis.db</code></li><li>dotenv var: <code>RATE_LIMITER_REDIS_DATABASE | REDIS_DATABASE</code></li><li>type: <code>number</code></li><li>default: <code>0</code></li></ul><h3 id="key-prefix" tabindex="-1">Key prefix <a class="header-anchor" href="#key-prefix" aria-label="Permalink to &quot;Key prefix&quot;">​</a></h3><ul><li>object-path: <code>redis.keyPrefix</code></li><li>dotenv var: <code>RATE_LIMITER_REDIS_PREFIX</code></li><li>type: <code>string</code></li><li>default: <code>&#39;it24:rate-limiter:&#39;</code></li></ul><h2 id="generic" tabindex="-1">Generic <a class="header-anchor" href="#generic" aria-label="Permalink to &quot;Generic&quot;">​</a></h2><p>Generic rate limit settings for <code>/api</code> routes.</p><h3 id="window" tabindex="-1">Window <a class="header-anchor" href="#window" aria-label="Permalink to &quot;Window&quot;">​</a></h3><p>Time window to track the requests.</p><ul><li>object-path: <code>generic.windowMs</code></li><li>dotenv var: <code>RATE_LIMITER_GENERIC_WINDOW</code></li><li>type: <code>string</code></li><li>default: <code>&#39;5m&#39;</code></li></ul><h3 id="limit" tabindex="-1">Limit <a class="header-anchor" href="#limit" aria-label="Permalink to &quot;Limit&quot;">​</a></h3><p>Maximum number of requests that can be made within the specified time window.</p><ul><li>object-path: <code>generic.limit</code></li><li>dotenv var: <code>RATE_LIMITER_GENERIC_LIMIT</code></li><li>type: <code>number</code></li><li>default: <code>300</code></li></ul><h2 id="login" tabindex="-1">Login <a class="header-anchor" href="#login" aria-label="Permalink to &quot;Login&quot;">​</a></h2><p>Rate limit settings for <code>/api/auth/login | /api/auth/login/alias | /api/auth/login/token</code> routes.</p><h3 id="window-1" tabindex="-1">Window <a class="header-anchor" href="#window-1" aria-label="Permalink to &quot;Window&quot;">​</a></h3><p>Time window to track the requests.</p><ul><li>object-path: <code>login.windowMs</code></li><li>dotenv var: <code>RATE_LIMITER_LOGIN_WINDOW</code></li><li>type: <code>string</code></li><li>default: <code>&#39;15m&#39;</code></li></ul><h3 id="limit-1" tabindex="-1">Limit <a class="header-anchor" href="#limit-1" aria-label="Permalink to &quot;Limit&quot;">​</a></h3><p>Maximum number of requests that can be made within the specified time window.</p><ul><li>object-path: <code>login.limit</code></li><li>dotenv var: <code>RATE_LIMITER_LOGIN_LIMIT</code></li><li>type: <code>number</code></li><li>default: <code>5</code></li></ul><h2 id="password" tabindex="-1">Password <a class="header-anchor" href="#password" aria-label="Permalink to &quot;Password&quot;">​</a></h2><p>Rate limit settings for <code>/api/password</code> routes.</p><h3 id="window-2" tabindex="-1">Window <a class="header-anchor" href="#window-2" aria-label="Permalink to &quot;Window&quot;">​</a></h3><p>Time window to track the requests.</p><ul><li>object-path: <code>password.windowMs</code></li><li>dotenv var: <code>RATE_LIMITER_PASSWORD_WINDOW</code></li><li>type: <code>string</code></li><li>default: <code>&#39;5m&#39;</code></li></ul><h3 id="limit-2" tabindex="-1">Limit <a class="header-anchor" href="#limit-2" aria-label="Permalink to &quot;Limit&quot;">​</a></h3><p>Maximum number of requests that can be made within the specified time window.</p><ul><li>object-path: <code>password.limit</code></li><li>dotenv var: <code>RATE_LIMITER_PASSWORD_LIMIT</code></li><li>type: <code>number</code></li><li>default: <code>1</code></li></ul><h2 id="generate-user" tabindex="-1">Generate user <a class="header-anchor" href="#generate-user" aria-label="Permalink to &quot;Generate user&quot;">​</a></h2><p>Rate limit settings for <code>/api/surveys/:surveyId/generate-user</code> routes.</p><h3 id="window-3" tabindex="-1">Window <a class="header-anchor" href="#window-3" aria-label="Permalink to &quot;Window&quot;">​</a></h3><p>Time window to track the requests.</p><ul><li>object-path: <code>generateUser.windowMs</code></li><li>dotenv var: <code>RATE_LIMITER_GEN_USER_WINDOW</code></li><li>type: <code>string</code></li><li>default: <code>&#39;5m&#39;</code></li></ul><h3 id="limit-3" tabindex="-1">Limit <a class="header-anchor" href="#limit-3" aria-label="Permalink to &quot;Limit&quot;">​</a></h3><p>Maximum number of requests that can be made within the specified time window.</p><ul><li>object-path: <code>generateUser.limit</code></li><li>dotenv var: <code>RATE_LIMITER_GEN_USER_LIMIT</code></li><li>type: <code>number</code></li><li>default: <code>1</code></li></ul><h2 id="pdf-outputs" tabindex="-1">PDF outputs <a class="header-anchor" href="#pdf-outputs" aria-label="Permalink to &quot;PDF outputs&quot;">​</a></h2><p>Rate limit settings for <code>/api/user/feedback</code> - <code>download</code> and <code>email</code> routes.</p><h3 id="window-4" tabindex="-1">Window <a class="header-anchor" href="#window-4" aria-label="Permalink to &quot;Window&quot;">​</a></h3><p>Time window to track the requests.</p><ul><li>object-path: <code>feedback.windowMs</code></li><li>dotenv var: <code>RATE_LIMITER_FEEDBACK_WINDOW</code></li><li>type: <code>string</code></li><li>default: <code>&#39;1m&#39;</code></li></ul><h3 id="limit-4" tabindex="-1">Limit <a class="header-anchor" href="#limit-4" aria-label="Permalink to &quot;Limit&quot;">​</a></h3><p>Maximum number of requests that can be made within the specified time window.</p><ul><li>object-path: <code>feedback.limit</code></li><li>dotenv var: <code>RATE_LIMITER_FEEDBACK_LIMIT</code></li><li>type: <code>number</code></li><li>default: <code>1</code></li></ul><h2 id="survey-feedback-ratings" tabindex="-1">Survey / feedback ratings <a class="header-anchor" href="#survey-feedback-ratings" aria-label="Permalink to &quot;Survey / feedback ratings&quot;">​</a></h2><p>Rate limit settings for <code>/api/surveys/:surveyId/rating</code>.</p><h3 id="window-5" tabindex="-1">Window <a class="header-anchor" href="#window-5" aria-label="Permalink to &quot;Window&quot;">​</a></h3><p>Time window to track the requests.</p><ul><li>object-path: <code>feedback.windowMs</code></li><li>dotenv var: <code>RATE_LIMITER_RATING_WINDOW</code></li><li>type: <code>string</code></li><li>default: <code>&#39;15m&#39;</code></li></ul><h3 id="limit-5" tabindex="-1">Limit <a class="header-anchor" href="#limit-5" aria-label="Permalink to &quot;Limit&quot;">​</a></h3><p>Maximum number of requests that can be made within the specified time window.</p><ul><li>object-path: <code>feedback.limit</code></li><li>dotenv var: <code>RATE_LIMITER_RATING_LIMIT</code></li><li>type: <code>number</code></li><li>default: <code>1</code></li></ul>',64)]))}const p=i(d,[["render",l]]);export{m as __pageData,p as default};
