import{_ as s,c as o,o as a,a as n}from"./app.b729fe7f.js";const C=JSON.parse('{"title":"Food data","description":"","frontmatter":{},"headers":[{"level":2,"title":"Get food data","slug":"get-food-data","link":"#get-food-data","children":[{"level":3,"title":"Request","slug":"request","link":"#request","children":[]},{"level":3,"title":"Response","slug":"response","link":"#response","children":[]}]},{"level":2,"title":"Get automatic associated foods suggestions","slug":"get-automatic-associated-foods-suggestions","link":"#get-automatic-associated-foods-suggestions","children":[{"level":3,"title":"Request","slug":"request-1","link":"#request-1","children":[]},{"level":3,"title":"Response","slug":"response-1","link":"#response-1","children":[]}]}],"relativePath":"api/survey/food-data.md"}'),e={name:"api/survey/food-data.md"},t=n(`<h1 id="food-data" tabindex="-1">Food data <a class="header-anchor" href="#food-data" aria-hidden="true">#</a></h1><p>Functions related to browsing the food database as a survey respondent.</p><h2 id="get-food-data" tabindex="-1">Get food data <a class="header-anchor" href="#get-food-data" aria-hidden="true">#</a></h2><p>Get portion size estimation options, associated foods and related data for a food from the database.</p><p><a href="https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/food/user/FoodDataController.scala#L96-L112" target="_blank" rel="noreferrer">v3 implementation</a></p><p><a href="https://github.com/MRC-Epid-it24/intake24/blob/master/apps/api/src/http/controllers/food.controller.ts" target="_blank" rel="noreferrer">v4 food boilerplate</a></p><h3 id="request" tabindex="-1">Request <a class="header-anchor" href="#request" aria-hidden="true">#</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">GET /api/foods/</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">locale</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">/</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">code</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Authorization: Bearer </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">accessToken</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">Content-Type: application/json</span></span>
<span class="line"></span></code></pre></div><p>where</p><p><strong>locale</strong> is the locale ID to get the food data for,</p><p><strong>code</strong> is the Intake24 food code.</p><h3 id="response" tabindex="-1">Response <a class="header-anchor" href="#response" aria-hidden="true">#</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;"> OK</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">code</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">localDescription</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">readyMealOption</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> boolean</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">sameAsBeforeOption</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> boolean</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">caloriesPer100g</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> number</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">brands</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">[],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">categories</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">[],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">associatedFoods</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">foodOrCategoryCode</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> | </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">promptText</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">linkAsMain</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> boolean</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">genericName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">portionSizeMethods</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">method</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">standard-portion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> | </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">as-served</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> | </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">guide-image</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> | </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cereal</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">                | </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">drink-scale</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> | </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">milk-on-cereal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> | </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">milk-in-a-hot-drink</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> | </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pizza</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">imageUrl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">useForRecipes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> boolean</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">conversionFactor</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">parameters</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">          ...</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>where</p><p><strong>code</strong> is the Intake24 food code,</p><p><strong>localDescription</strong> is the name of the food in the current locale,</p><p><strong>readyMealOption</strong> controls whether to display the ready meal prompt for this food,</p><p><strong>sameAsBeforeOption</strong> controls whether to enable the same-as-before feature for this food,</p><p><strong>caloriesPer100g</strong> is the amount of kcal per 100g of this food, used to trigger the low total energy prompt,</p><p><strong>brands</strong> is the list of known brands for this food, used in the brands prompt,</p><p><strong>categories</strong> is the list of all parent categories for this food, including transitive,</p><p><strong>associatedFoods</strong> is the list of associated food suggestions, where:</p><div class="nested-description"><p><strong>foodOrCategoryCode</strong> is an array of 2 elements where the first element is either 0 or 1. If the first element is 0, then the second element is a food code, or, if the first element is 1, the second element is a category code,</p><p><strong>promptText</strong> is the wording of the associated food question,</p><p><strong>linkAsMain</strong> controls whether accepted associated food suggestions should be created as &quot;main&quot; or &quot;linked&quot;,</p><p><strong>genericName</strong> is the simple name of the associated food, used by some UI elements (e.g., &quot;bread&quot;, &quot;sauce&quot;)</p></div><p><strong>portionSizeMethods</strong> is the list of available portion size estimation options, where:</p><div class="nested-description"><p><strong>method</strong> is ID of the portion size estimation method to use. See the <a href="./../../developer/portion-size.html">portion size methods</a> guide for the list of currently supported methods.</p><p><strong>description</strong> is the description of this portion size estimation option for the selection screen (localised string key),</p><p><strong>imageUrl</strong> is the link to the image for the selection screen,</p><p><strong>useForRecipes</strong> controls whether this portion size estimation option is appropriate for recipe ingredients,</p><p><strong>conversionFactor</strong> is the multiplier for the final potion weight calculation (e.g. when portion size images do not represent the exact food but something similar that could have different density),</p><p><strong>parameters</strong> is the object with fields specific to the portion size method. See the <a href="./../../developer/portion-size.html">portion size methods</a> guide for details.</p></div><h2 id="get-automatic-associated-foods-suggestions" tabindex="-1">Get automatic associated foods suggestions <a class="header-anchor" href="#get-automatic-associated-foods-suggestions" aria-hidden="true">#</a></h2><p>Get the automatically generated associated foods based on the pairwise associations algorithm. This method will always suggest categories (as opposed to manually set up associated foods that can point to individual foods as well as categories).</p><p><a href="https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/food/user/FoodDataController.scala#L154-L186" target="_blank" rel="noreferrer">v3 implementation</a></p><h3 id="request-1" tabindex="-1">Request <a class="header-anchor" href="#request-1" aria-hidden="true">#</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">GET /api/foods/associated/</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">locale</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">?f=</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">foodCode</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">&amp;f=</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">foodCode</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Authorization: Bearer </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">accessToken</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">Content-Type: application/json</span></span>
<span class="line"></span></code></pre></div><p>where</p><p><strong>locale</strong> is the current locale ID,</p><p><strong>f</strong> is the list of food codes in the meal (can be repeated)</p><h3 id="response-1" tabindex="-1">Response <a class="header-anchor" href="#response-1" aria-hidden="true">#</a></h3><p>A list of categories:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">code</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">localDescription</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> string</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>where</p><p><strong>code</strong> is the Intake24 category code,</p><p><strong>localDescription</strong> is the name of the category in the local language,</p>`,39),l=[t];function p(r,c,i,D,F,y){return a(),o("div",null,l)}const A=s(e,[["render",p]]);export{C as __pageData,A as default};
