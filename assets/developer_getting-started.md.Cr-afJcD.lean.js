import{_ as t,c as a,a2 as o,o as s}from"./chunks/framework.88oDg2e8.js";const p=JSON.parse('{"title":"Getting started","description":"","frontmatter":{},"headers":[],"relativePath":"developer/getting-started.md","filePath":"developer/getting-started.md"}'),i={name:"developer/getting-started.md"};function r(n,e,d,c,l,h){return s(),a("div",null,e[0]||(e[0]=[o('<h1 id="getting-started" tabindex="-1">Getting started <a class="header-anchor" href="#getting-started" aria-label="Permalink to &quot;Getting started&quot;">​</a></h1><h2 id="dev-instance" tabindex="-1">Dev instance <a class="header-anchor" href="#dev-instance" aria-label="Permalink to &quot;Dev instance&quot;">​</a></h2><p>Steps to getting a local instance running</p><ul><li>Run Dev VM (download from S3 bucket - contact the Intake24 team), which maps out the database on 192.168.56.10:5432 (PostgreSQL). Start this VM.</li><li>Alternatively, obtain database snapshots from the intake24 team and import them into a database (e.g. DBeaver). Please check the guidance on <a href="https://dbeaver.com/docs/wiki/Backup-Restore/" target="_blank" rel="noreferrer">importing database snapshots with DBeaver</a>.</li><li>Local servers need to be run for <code>api</code>, <code>admin</code> and <code>survey</code> from each respective folder:</li><li>To start <code>api</code> / <code>admin</code> / <code>survey</code>: <code>pnpm dev</code> for live reloads</li></ul><h2 id="useful-tools" tabindex="-1">Useful tools <a class="header-anchor" href="#useful-tools" aria-label="Permalink to &quot;Useful tools&quot;">​</a></h2><ul><li>IDE for developing Node, Typescript, npm and associated tooling (e.g. VS Code)</li><li>Virtual Box (v6.x minimum) for running database VM</li><li>Database browser (e.g. DBeaver) for exploring/manipulating PostgreSQL DB.</li><li>Redis</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Intake24 requires node.js version 16 or newer, please make sure to check your node.js version before continuing.</p></div><p>Clone the <a href="https://github.com/MRC-Epid-it24/intake24" target="_blank" rel="noreferrer">Intake24 version 4 repository on GitHub</a>.</p><p>Follow the readme instructions in the root of the repository.</p><h2 id="databases" tabindex="-1">Databases <a class="header-anchor" href="#databases" aria-label="Permalink to &quot;Databases&quot;">​</a></h2><p>Please contact the intake24 team for the latest development virtual machine. <a href="https://docs.intake24.org/developer/vm" target="_blank" rel="noreferrer">Please also check the guidance on using the development virtual machine</a>. Alternatively, obtain database snapshots from the intake24 team and import them into a database browser (e.g. DBeaver). Please check the guidance on <a href="https://dbeaver.com/docs/wiki/Backup-Restore/" target="_blank" rel="noreferrer">importing database snapshots with DBeaver</a>. While using the database snapshots, don&#39;t forget to set up your own Redis instance.</p><h2 id="api-server" tabindex="-1">API server <a class="header-anchor" href="#api-server" aria-label="Permalink to &quot;API server&quot;">​</a></h2><p>Go to <code>api</code> and follow instructions in the readme file.</p><p>Copy the <code>.env-template</code> file to <code>.env</code> and change the following settings:</p><ul><li><code>JWT_ACCESS_SECRET</code> — set to any string (security doesn&#39;t matter for development purposes), e.g. <code>verybigsecret</code>,</li><li><code>JWS_REFRESH_SECRET</code> — same as above but use a different secret,</li><li><code>DB_SYSTEM_HOST</code> — set to <code>192.168.56.4</code> if using the development VM or alternatively point to your own database instance,</li><li><code>DB_SYSTEM_PORT</code>, <code>DB_SYSTEM_USERNAME</code>, <code>DB_SYSTEM_PASSWORD</code> — keep the default settings if using the VM or edit according to your own DB settings,</li><li><code>DB_FOODS_HOST</code> — set to <code>192.168.56.4</code> if using the development VM or alternatively point to your own database instance,</li><li><code>DB_FOODS_PORT</code>, <code>DB_FOODS_USERNAME</code>, <code>DB_FOODS_PASSWORD</code> — keep the default settings if using the VM or edit according to your own DB settings,</li><li><code>QUEUE_REDIS_HOST</code> — set to <code>192.168.56.4</code> if using the development VM or alternatively point to your own Redis instance.</li></ul><p>Check that the settings are correct by starting the server with <code>pnpm dev</code>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Add <code>DB_DEV_SYSTEM_DEBUG_QUERY_LIMIT=500</code> and <code>DB_DEV_FOODS_DEBUG_QUERY_LIMIT=500</code> to the API <code>.env</code> file to limit debug query char limit. It can prevent long queries from cluttering the console. The API server runs food indexing each time it starts so the console outputs can be quite a lot. The server does that for all locales in the food database, so for the DEV instance, you can also limit number of locales it runs against in <code>.env</code> by setting <code>APP_ENABLED_LOCALES = [&quot;UK_V2_2022&quot;]</code>.</p></div><h2 id="api-access" tabindex="-1">API access <a class="header-anchor" href="#api-access" aria-label="Permalink to &quot;API access&quot;">​</a></h2><p>If you had your account already created in the databse snapshot you are using, please add your email in DBeaver <code>users</code> tables, then go to <code>apps/cli</code>, and run <code>pnpm cli:dev hash-password yourNewPassword</code>. Grab the hash and put it manually into the <code>password_hash</code> column of the <code>user_passwords</code> table for your user record (find you user_id in users). There will be a cli command available to create a whole new account without this manual hassle.</p>',19)]))}const m=t(i,[["render",r]]);export{p as __pageData,m as default};
