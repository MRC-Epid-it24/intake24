import{_ as s,c as a,o as e,R as n}from"./chunks/framework.bdd825cc.js";const C=JSON.parse('{"title":"Get started","description":"","frontmatter":{},"headers":[],"relativePath":"overview/get-started.md","filePath":"overview/get-started.md"}'),l={name:"overview/get-started.md"},o=n(`<h1 id="get-started" tabindex="-1">Get started <a class="header-anchor" href="#get-started" aria-label="Permalink to &quot;Get started&quot;">​</a></h1><p>This section briefly describes how to configure, build and start the Intake24 components.</p><h2 id="repository" tabindex="-1">Repository <a class="header-anchor" href="#repository" aria-label="Permalink to &quot;Repository&quot;">​</a></h2><p>Clone the repository</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/MRC-Epid-it24/intake24</span></span></code></pre></div><p>Repository is set as mono-repository with <a href="https://docs.npmjs.com/cli/v7/using-npm/workspaces" target="_blank" rel="noreferrer">workspaces</a>.</p><p>Shared components are in <code>packages</code> folder. Applications are in <code>apps</code> folder.</p><p>Install <code>pnpm</code> using built-in <code>npm</code> (see <a href="https://pnpm.io" target="_blank" rel="noreferrer">pnpm docs</a> for further options).</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm</span></span></code></pre></div><p>Install project dependencies</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span></code></pre></div><p>Set up <code>.env</code> file for each application you want to build, see below.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apps/{app}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env-template</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">nano</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span></code></pre></div><p>Build all applications</p><ul><li>run command either from top-level to build all applications (<code>api</code>, <code>cli</code>, <code>admin</code>, <code>portal</code> and <code>survey</code>).</li><li>run command from <code>apps/{app}</code> folder to build specific application</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Environment variables</p><p>Code is using <code>.env </code> environment files. Each project contains a template file (<code>.env-template</code>). If you&#39;re setting up fresh project, you can run CLI command, which generates all the files and couple of required specific keys. Follow the <a href="/cli/">CLI instructions</a> and how to run <a href="/cli/generate-env.html">generate-env</a>.</p><p>Some of the environment variables are either bundled in or used to configure build of SPA applications. Make sure you set up those <code>.env</code> file before running build for SPAs.</p></div><h2 id="api-server" tabindex="-1">API Server <a class="header-anchor" href="#api-server" aria-label="Permalink to &quot;API Server&quot;">​</a></h2><p>Navigate to <code>apps/api</code> directory.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apps/api</span></span></code></pre></div><p>Copy template of configuration file and edit it as required. Please see <a href="/config/">Configuration</a> section for detailed description of configuration options.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env-template</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span></code></pre></div><p>Build the application</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><p>Start the application</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">For production, consider</p><ol><li>Deploying as dedicated service. Refer to your OS environment how to set that up.</li><li>User process manager, e.g. <a href="https://pm2.keymetrics.io" target="_blank" rel="noreferrer">PM2</a></li><li>Deploy behind proper http server, e.g. <a href="https://www.nginx.com" target="_blank" rel="noreferrer">Nginx</a>, <a href="https://www.apache.org" target="_blank" rel="noreferrer">Apache</a> etc.</li></ol></div><p>Deployment section / ansible scripts provide examples how to use dedicated service on Ubuntu and run it behind Nginx reverse proxy.</p><h2 id="database" tabindex="-1">Database <a class="header-anchor" href="#database" aria-label="Permalink to &quot;Database&quot;">​</a></h2><ul><li>project is using <a href="https://github.com/sequelize/cli" target="_blank" rel="noreferrer">sequelize-cli</a></li><li>database layer is located in <code>packages/db</code></li><li>config / migration files (per database) are store in respective <code>packages/db/sequelize/{database}</code> folders</li></ul><p>Set up <code>.env</code> file if running independently of API server so it can load connection details</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env-template</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span></code></pre></div><p>Migrations can be executed from root-level or package level with following commands</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># both databases</span></span>
<span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># or each database</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># foods</span></span>
<span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db:migrate:foods</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># system</span></span>
<span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db:migrate:system</span></span></code></pre></div><h2 id="admin-client" tabindex="-1">Admin client <a class="header-anchor" href="#admin-client" aria-label="Permalink to &quot;Admin client&quot;">​</a></h2><p>Navigate to <code>apps/admin</code> directory.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apps/admin</span></span></code></pre></div><p>Copy template of configuration file and edit it as required. Please see <a href="/config/">Configuration</a> section for detailed description of configuration options.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env-template</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span></code></pre></div><p>Build the application</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><p>Start the application</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This should only be used if you host the client on separate domain. It will start separate http server to serve the application.</p></div><p>Serve the application locally in development mode with hot-reload</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dev</span></span></code></pre></div><h2 id="survey-client" tabindex="-1">Survey client <a class="header-anchor" href="#survey-client" aria-label="Permalink to &quot;Survey client&quot;">​</a></h2><p>Navigate to <code>apps/survey</code> directory.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apps/survey</span></span></code></pre></div><p>Copy template of configuration file and edit it as required. Please see <a href="/config/">Configuration</a> section for detailed description of configuration options.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env-template</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span></code></pre></div><p>Build the application</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><p>Start the application</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This should only be used if you host the client on separate domain. It will start separate http server to serve the application.</p></div><p>Serve the application locally in development mode with hot-reload</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dev</span></span></code></pre></div><h2 id="documentation" tabindex="-1">Documentation <a class="header-anchor" href="#documentation" aria-label="Permalink to &quot;Documentation&quot;">​</a></h2><p>Documentation is built with <a href="https://vitepress.vuejs.org" target="_blank" rel="noreferrer">vitepress</a>.</p><p>Serve the application locally in development mode with hot-reload</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs:dev</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Documentation is automatically rebuilt and deployed to dedicated site whenever source code is updated.</p></div>`,63),t=[o];function p(i,c,r,d,h,u){return e(),a("div",null,t)}const m=s(l,[["render",p]]);export{C as __pageData,m as default};
