import{_ as e,c as n,o as a,a as s}from"./app.2868fdac.js";const g=JSON.parse('{"title":"Source code","description":"","frontmatter":{},"headers":[{"level":2,"title":"Repository structure","slug":"repository-structure"},{"level":2,"title":"Dependencies","slug":"dependencies"},{"level":2,"title":"Commit convention","slug":"commit-convention"},{"level":2,"title":"Code style","slug":"code-style"},{"level":2,"title":"Renovate","slug":"renovate"},{"level":2,"title":"Continuous integration","slug":"continuous-integration"},{"level":3,"title":"Build","slug":"build"},{"level":3,"title":"Documentation","slug":"documentation"}],"relativePath":"overview/source-code.md"}'),t={name:"overview/source-code.md"},o=s(`<h1 id="source-code" tabindex="-1">Source code <a class="header-anchor" href="#source-code" aria-hidden="true">#</a></h1><p>Install <code>git</code> if you don&#39;t already have it.</p><p>Clone the repository</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">git clone https://github.com/MRC-Epid-it24/intake24</span></span>
<span class="line"></span></code></pre></div><h2 id="repository-structure" tabindex="-1">Repository structure <a class="header-anchor" href="#repository-structure" aria-hidden="true">#</a></h2><p>Repository is set as mono-repository with <a href="https://docs.npmjs.com/cli/v7/using-npm/workspaces" target="_blank" rel="noreferrer">workspaces</a>.</p><p>Applications are in <code>apps</code> folder. Shared components are in <code>packages</code> folder.</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500 .github -&gt; Github actions / workflows</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500 apps -&gt; Applications</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502  \u2514\u2500 api -&gt; API Server</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502  \u2514\u2500 admin -&gt; Admin tool</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502  \u2514\u2500 cli -&gt; Command line interface</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502  \u2514\u2500 portal -&gt; Portal website</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502  \u2514\u2500 survey -&gt; Survey application</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500 deployment - Ansible playbooks / scripts for deployment</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500 docs -&gt; Documentation</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500 packages</span></span>
<span class="line"><span style="color:#A6ACCD;">   \u2514\u2500 common (shared code)</span></span>
<span class="line"><span style="color:#A6ACCD;">   \u2514\u2500 common-backend (backend shared code)</span></span>
<span class="line"><span style="color:#A6ACCD;">   \u2514\u2500 db (database layer)</span></span>
<span class="line"><span style="color:#A6ACCD;">   \u2514\u2500 i18n (translations)</span></span>
<span class="line"><span style="color:#A6ACCD;">   \u2514\u2500 services (shared services for apps)</span></span>
<span class="line"><span style="color:#A6ACCD;">   \u2514\u2500 ui (shared UI components for frontend apps)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-hidden="true">#</a></h2><p>Intake24 dependencies are set up with <code>pnpm</code>.</p><p>Install <code>pnpm</code> using built-in <code>npm</code> or see <a href="https://pnpm.io" target="_blank" rel="noreferrer">pnpm docs</a> for further installation options.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">npm install -g pnpm</span></span>
<span class="line"></span></code></pre></div><p>Install all dependencies from root-level</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">pnpm install</span></span>
<span class="line"></span></code></pre></div><h2 id="commit-convention" tabindex="-1">Commit convention <a class="header-anchor" href="#commit-convention" aria-hidden="true">#</a></h2><p>Commit messages are restricted to follow <code>conventional-changelog</code> convention, adapted from <a href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-angular" target="_blank" rel="noreferrer">Angular&#39;s commit convention</a>.</p><p>Please see <a href="https://github.com/MRC-Epid-it24/intake24/blob/master/.github/commit-convention.md" target="_blank" rel="noreferrer"><code>.github/commit-convention.md</code></a> for more details.</p><p>Please see <a href="https://github.com/MRC-Epid-it24/intake24/blob/master/scripts/verify-commit.ts" target="_blank" rel="noreferrer"><code>scripts/verify-commit.ts</code></a> for implementation.</p><h2 id="code-style" tabindex="-1">Code style <a class="header-anchor" href="#code-style" aria-hidden="true">#</a></h2><p>Project is set up with <a href="https://eslint.org/" target="_blank" rel="noreferrer">eslint</a> and <a href="https://prettier.io/" target="_blank" rel="noreferrer">prettier</a> to help to keep clean and maintainable code.</p><p>Both integrate very well with most of the IDEs. You will probably just need to install respective plugins / extensions and configure it to run on <code>save</code> to have immediate effect.</p><p>You can also run it manually from root-level or in each <code>app</code> / <code>package</code>.</p><p>Run linting and try to fix as much as possible automatically</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">pnpm lint</span></span>
<span class="line"></span></code></pre></div><p>Lint step also runs for each file, when changes are committed.</p><h2 id="renovate" tabindex="-1">Renovate <a class="header-anchor" href="#renovate" aria-hidden="true">#</a></h2><p>Repository is set up with <a href="https://github.com/renovatebot/renovate" target="_blank" rel="noreferrer">renovate bot</a>, which checks the dependencies and prepares PRs. It runs on weekly basis and can be configured through <a href="https://github.com/MRC-Epid-it24/intake24/blob/master/.github/renovate.json5" target="_blank" rel="noreferrer"><code>.github/renovate.json5</code></a> config file.</p><h2 id="continuous-integration" tabindex="-1">Continuous integration <a class="header-anchor" href="#continuous-integration" aria-hidden="true">#</a></h2><h3 id="build" tabindex="-1">Build <a class="header-anchor" href="#build" aria-hidden="true">#</a></h3><p>Main <a href="https://github.com/MRC-Epid-it24/intake24/blob/master/.github/workflows/ci.yml" target="_blank" rel="noreferrer">CI</a> action is triggered on source code change and it runs lint / build / tests / steps for each components to ensure all is working as expected.</p><h3 id="documentation" tabindex="-1">Documentation <a class="header-anchor" href="#documentation" aria-hidden="true">#</a></h3><p>Whenever <code>docs</code> source code is modified, <a href="https://github.com/MRC-Epid-it24/intake24/blob/master/.github/workflows/docs.yml" target="_blank" rel="noreferrer">Docs CI</a> is triggered and documentation site is automatically rebuilt.</p>`,32),r=[o];function i(l,c,p,d,h,u){return a(),n("div",null,r)}const b=e(t,[["render",i]]);export{g as __pageData,b as default};
