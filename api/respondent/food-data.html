<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Portion size data | Intake24 NG Documentation</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Intake24 dietary recall system">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.c95a076b.css" as="style"><link rel="preload" href="/assets/js/app.1fc11bcb.js" as="script"><link rel="preload" href="/assets/js/2.011a0b1c.js" as="script"><link rel="preload" href="/assets/js/24.1a0e56e3.js" as="script"><link rel="prefetch" href="/assets/js/10.5f86e8a4.js"><link rel="prefetch" href="/assets/js/11.490c7c31.js"><link rel="prefetch" href="/assets/js/12.d4439503.js"><link rel="prefetch" href="/assets/js/13.9e39aa61.js"><link rel="prefetch" href="/assets/js/14.ecb417da.js"><link rel="prefetch" href="/assets/js/15.f47bdc9d.js"><link rel="prefetch" href="/assets/js/16.10b7f291.js"><link rel="prefetch" href="/assets/js/17.cfe38672.js"><link rel="prefetch" href="/assets/js/18.dcff89d5.js"><link rel="prefetch" href="/assets/js/19.90d5a2c3.js"><link rel="prefetch" href="/assets/js/20.3dbf3121.js"><link rel="prefetch" href="/assets/js/21.51b48504.js"><link rel="prefetch" href="/assets/js/22.59216091.js"><link rel="prefetch" href="/assets/js/23.71ab9f29.js"><link rel="prefetch" href="/assets/js/25.ffe654a7.js"><link rel="prefetch" href="/assets/js/26.0aa4757f.js"><link rel="prefetch" href="/assets/js/27.8a966cf0.js"><link rel="prefetch" href="/assets/js/28.de8d8c64.js"><link rel="prefetch" href="/assets/js/29.5d7327c7.js"><link rel="prefetch" href="/assets/js/3.dcefb49a.js"><link rel="prefetch" href="/assets/js/30.cbf1d62b.js"><link rel="prefetch" href="/assets/js/31.7c9d1286.js"><link rel="prefetch" href="/assets/js/32.ead4823d.js"><link rel="prefetch" href="/assets/js/33.830b6334.js"><link rel="prefetch" href="/assets/js/34.6f45106e.js"><link rel="prefetch" href="/assets/js/35.459dfb3e.js"><link rel="prefetch" href="/assets/js/36.159bc69c.js"><link rel="prefetch" href="/assets/js/37.25b2e531.js"><link rel="prefetch" href="/assets/js/4.34615e07.js"><link rel="prefetch" href="/assets/js/5.d68be65c.js"><link rel="prefetch" href="/assets/js/6.c276fad5.js"><link rel="prefetch" href="/assets/js/7.76140686.js"><link rel="prefetch" href="/assets/js/8.e5ac1730.js"><link rel="prefetch" href="/assets/js/9.c1f510d0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c95a076b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Intake24 NG Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/survey/" class="nav-link">
  Survey
</a></div><div class="nav-item"><a href="/admin/" class="nav-link">
  Admin
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/data-dictionary/" class="nav-link">
  Data Dictionary
</a></div><div class="nav-item"><a href="/developer/" class="nav-link">
  Developer resources
</a></div><div class="nav-item"><a href="https://github.com/MRC-Epid-it24/intake24" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/survey/" class="nav-link">
  Survey
</a></div><div class="nav-item"><a href="/admin/" class="nav-link">
  Admin
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/data-dictionary/" class="nav-link">
  Data Dictionary
</a></div><div class="nav-item"><a href="/developer/" class="nav-link">
  Developer resources
</a></div><div class="nav-item"><a href="https://github.com/MRC-Epid-it24/intake24" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Global</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/api/authentication.html" class="sidebar-link">Authentication</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Admin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/admin/languages.html" class="sidebar-link">Languages</a></li><li><a href="/api/admin/locales.html" class="sidebar-link">Locales</a></li><li><a href="/api/admin/schemes.html" class="sidebar-link">Schemes</a></li><li><a href="/api/admin/surveys.html" class="sidebar-link">Surveys</a></li><li><a href="/api/admin/users.html" class="sidebar-link">Users</a></li><li><a href="/api/admin/roles.html" class="sidebar-link">Roles</a></li><li><a href="/api/admin/permissions.html" class="sidebar-link">Permissions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Respondent</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/respondent/survey.html" class="sidebar-link">Survey</a></li><li><a href="/api/respondent/food-lookup.html" class="sidebar-link">Food database lookup</a></li><li><a href="/api/respondent/food-data.html" aria-current="page" class="active sidebar-link">Portion size data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-food-data" class="sidebar-link">Get food data</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-as-served-image-set-data" class="sidebar-link">Get as served image set data</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-multiple-as-served-image-sets-data" class="sidebar-link">Get multiple as served image sets data</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-guide-image-data" class="sidebar-link">Get guide image data</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-image-map-data" class="sidebar-link">Get image map data</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-multiple-image-maps-data" class="sidebar-link">Get multiple image maps data</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-drink-scale-data" class="sidebar-link">Get drink scale data</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#weight-entry-dummy" class="sidebar-link">Weight entry dummy</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-root-category-list-for-browsing" class="sidebar-link">Get root category list for browsing</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#list-category-contents" class="sidebar-link">List category contents</a></li><li class="sidebar-sub-header"><a href="/api/respondent/food-data.html#get-automatic-associated-foods-suggestions" class="sidebar-link">Get automatic associated foods suggestions</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="portion-size-data"><a href="#portion-size-data" class="header-anchor">#</a> Portion size data</h1> <p>Functions related to portion size estimation and browsing the food database as a survey respondent.</p> <h2 id="get-food-data"><a href="#get-food-data" class="header-anchor">#</a> Get food data</h2> <p>Get portion size estimation options, associated foods and related data for a food from the database.</p> <p><a href="https://github.com/MRC-Epid-it24/api-server/blob/master/ApiPlayServer/app/controllers/food/user/FoodDataController.scala#L96-L112" target="_blank" rel="noopener noreferrer">v3 implementation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="request"><a href="#request" class="header-anchor">#</a> Request</h3> <div class="language-html extra-class"><pre class="language-html"><code>GET /api/user/foods/{locale}/{code}    

Authorization: Bearer {accessToken}
</code></pre></div><p>where</p> <p><strong>locale</strong> is the locale ID to get the food data for,</p> <p><strong>code</strong> is the Intake24 food code.</p> <h3 id="response"><a href="#response" class="header-anchor">#</a> Response</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token property">&quot;localDescription&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token property">&quot;readyMealOption&quot;</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  <span class="token property">&quot;sameAsBeforeOption&quot;</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  <span class="token property">&quot;caloriesPer100g&quot;</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
  <span class="token property">&quot;brands&quot;</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;categories&quot;</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;associatedFoods&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;foodOrCategoryCode&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> string<span class="token punctuation">]</span> | <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> string<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;promptText&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
      <span class="token property">&quot;linkAsMain&quot;</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
      <span class="token property">&quot;genericName&quot;</span><span class="token operator">:</span> string
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;portionSizeMethods&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard-portion&quot;</span> | <span class="token string">&quot;as-served&quot;</span> | <span class="token string">&quot;guide-image&quot;</span> | <span class="token string">&quot;cereal&quot;</span> 
                | <span class="token string">&quot;drink-scale&quot;</span> | <span class="token string">&quot;milk-on-cereal&quot;</span> | <span class="token string">&quot;milk-in-a-hot-drink&quot;</span> | <span class="token string">&quot;pizza&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
      <span class="token property">&quot;imageUrl&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
      <span class="token property">&quot;useForRecipes&quot;</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
      <span class="token string">&quot;conversionFactor&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token property">&quot;...&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
          ...
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>where</p> <p><strong>code</strong> is the Intake24 food code,</p> <p><strong>localDescription</strong> is the name of the food in the current locale,</p> <p><strong>readyMealOption</strong> controls whether to display the ready meal prompt for this food,</p> <p><strong>sameAsBeforeOption</strong> controls whether to enable the same-as-before feature for this food,</p> <p><strong>caloriesPer100g</strong> is the amount of kcal per 100g of this food, used to trigger the low total energy prompt,</p> <p><strong>brands</strong> is the list of known brands for this food, used in the brands prompt,</p> <p><strong>categories</strong> is the list of all parent categories for this food, including transitive,</p> <p><strong>associatedFoods</strong> is the list of associated food suggestions, where:</p> <div style="margin-left:3em;"><p><strong>foodOrCategoryCode</strong> is an array of 2 elements where the first element is either 0 or 1. If the
first element is 0, then the second element is a food code, or, if the first element is 1, the second
element is a category code,</p> <p><strong>promptText</strong> is the wording of the associated food question,</p> <p><strong>linkAsMain</strong> controls whether accepted associated food suggestions should be created as &quot;main&quot; or &quot;linked&quot;,</p> <p><strong>genericName</strong> is the simple name of the associated food, used by some UI elements (e.g., &quot;bread&quot;, &quot;sauce&quot;)</p></div> <p><strong>portionSizeMethods</strong> is the list of available portion size estimation options, where:</p> <div style="margin-left:3em;"><p><strong>method</strong> is ID of the portion size estimation method to use,</p> <p><strong>description</strong> is the description of this portion size estimation option for the selection screen (localised
string key),</p> <p><strong>imageUrl</strong> is the link to the image for the selection screen,</p> <p><strong>useForRecipes</strong> controls whether this portion size estimation option is appropriate for recipe ingredients,</p> <p><strong>conversionFactor</strong> is the multiplier for the final potion weight calculation (e.g. when portion size images
do not represent the exact food but something similar that could have different density),</p> <p><strong>parameters</strong> is the object with fields specific to the portion size method.</p></div> <h2 id="get-as-served-image-set-data"><a href="#get-as-served-image-set-data" class="header-anchor">#</a> Get as served image set data</h2> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/portion-size/as-served/{id}&quot;)
void getAsServedSet(@PathParam(&quot;id&quot;) String id, MethodCallback&lt;AsServedSet&gt; callback);
</code></pre></div><h2 id="get-multiple-as-served-image-sets-data"><a href="#get-multiple-as-served-image-sets-data" class="header-anchor">#</a> Get multiple as served image sets data</h2> <div class="language- extra-class"><pre><code>@POST
@Path(&quot;/user/portion-size/as-served&quot;)
void getAsServedSets(List&lt;String&gt; ids, MethodCallback&lt;List&lt;AsServedSet&gt;&gt; callback);
</code></pre></div><h2 id="get-guide-image-data"><a href="#get-guide-image-data" class="header-anchor">#</a> Get guide image data</h2> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/portion-size/guide-image/{id}&quot;)
void getGuideImage(@PathParam(&quot;id&quot;) String id, MethodCallback&lt;GuideImage&gt; callback);
</code></pre></div><h2 id="get-image-map-data"><a href="#get-image-map-data" class="header-anchor">#</a> Get image map data</h2> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/portion-size/image-maps/{id}&quot;)
void getImageMap(@PathParam(&quot;id&quot;) String id, MethodCallback&lt;SImageMap&gt; callback);
</code></pre></div><h2 id="get-multiple-image-maps-data"><a href="#get-multiple-image-maps-data" class="header-anchor">#</a> Get multiple image maps data</h2> <div class="language- extra-class"><pre><code>@POST
@Path(&quot;/user/portion-size/image-maps&quot;)
void getImageMaps(List&lt;String&gt; ids, MethodCallback&lt;List&lt;SImageMap&gt;&gt; callback);
</code></pre></div><h2 id="get-drink-scale-data"><a href="#get-drink-scale-data" class="header-anchor">#</a> Get drink scale data</h2> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/portion-size/drinkware/{id}&quot;)
void getDrinkwareSet(@PathParam(&quot;id&quot;) String id, MethodCallback&lt;DrinkwareSet&gt; callback);
</code></pre></div><h2 id="weight-entry-dummy"><a href="#weight-entry-dummy" class="header-anchor">#</a> Weight entry dummy</h2> <p>Dummy endpoint for manual weight entry estimation method</p> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/portion-size/weight&quot;)
void getWeightPortionSizeMethod(MethodCallback&lt;PortionSizeMethod&gt; callback);
</code></pre></div><h2 id="get-root-category-list-for-browsing"><a href="#get-root-category-list-for-browsing" class="header-anchor">#</a> Get root category list for browsing</h2> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/categories/{locale}&quot;)
void getRootCategories(@PathParam(&quot;locale&quot;) String localeId, MethodCallback&lt;List&lt;CategoryHeader&gt;&gt; callback);
</code></pre></div><h2 id="list-category-contents"><a href="#list-category-contents" class="header-anchor">#</a> List category contents</h2> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/categories/{locale}/{code}&quot;)
void getCategoryContents(@PathParam(&quot;locale&quot;) String localeId, @PathParam(&quot;code&quot;) String categoryCode,
                         @QueryParam(&quot;alg&quot;) String algorithmId, @QueryParam(&quot;existing&quot;) List&lt;String&gt; existingFoods,
                         MethodCallback&lt;LookupResult&gt; callback);
</code></pre></div><h2 id="get-automatic-associated-foods-suggestions"><a href="#get-automatic-associated-foods-suggestions" class="header-anchor">#</a> Get automatic associated foods suggestions</h2> <div class="language- extra-class"><pre><code>@GET
@Path(&quot;/user/foods/associated/{locale}&quot;)
void getAutomaticAssociatedFoods(@PathParam(&quot;locale&quot;) String localeId, @QueryParam(&quot;f&quot;) List&lt;String&gt; foodCodes, MethodCallback&lt;AutomaticAssociatedFoods&gt; callback);
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/respondent/food-lookup.html" class="prev">
        Food database lookup
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1fc11bcb.js" defer></script><script src="/assets/js/2.011a0b1c.js" defer></script><script src="/assets/js/24.1a0e56e3.js" defer></script>
  </body>
</html>
